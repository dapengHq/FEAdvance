<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Javascript 部分 | 前端进阶之路</title>
    <meta name="generator" content="VuePress 1.5.4">
    <link rel="icon" href="/feadvance/images/icons/groot.png">
    <meta name="description" content="Just Play Around">
    <link rel="preload" href="/feadvance/assets/css/0.styles.9896fb68.css" as="style"><link rel="preload" href="/feadvance/assets/js/app.f074b184.js" as="script"><link rel="preload" href="/feadvance/assets/js/2.5918a041.js" as="script"><link rel="preload" href="/feadvance/assets/js/3.e4899730.js" as="script"><link rel="prefetch" href="/feadvance/assets/js/10.d86d36e3.js"><link rel="prefetch" href="/feadvance/assets/js/11.d8b39773.js"><link rel="prefetch" href="/feadvance/assets/js/12.1459641c.js"><link rel="prefetch" href="/feadvance/assets/js/13.f3e44fe0.js"><link rel="prefetch" href="/feadvance/assets/js/14.df56195a.js"><link rel="prefetch" href="/feadvance/assets/js/15.aec91ee0.js"><link rel="prefetch" href="/feadvance/assets/js/16.4997ce68.js"><link rel="prefetch" href="/feadvance/assets/js/17.d528fd45.js"><link rel="prefetch" href="/feadvance/assets/js/18.c188d1fe.js"><link rel="prefetch" href="/feadvance/assets/js/19.c859eac0.js"><link rel="prefetch" href="/feadvance/assets/js/20.ced20067.js"><link rel="prefetch" href="/feadvance/assets/js/21.7c0ac7ca.js"><link rel="prefetch" href="/feadvance/assets/js/22.6bf46972.js"><link rel="prefetch" href="/feadvance/assets/js/23.b142c01e.js"><link rel="prefetch" href="/feadvance/assets/js/24.f465ed76.js"><link rel="prefetch" href="/feadvance/assets/js/25.c7be4b71.js"><link rel="prefetch" href="/feadvance/assets/js/26.195929bc.js"><link rel="prefetch" href="/feadvance/assets/js/27.3c9ca6f9.js"><link rel="prefetch" href="/feadvance/assets/js/28.4e202974.js"><link rel="prefetch" href="/feadvance/assets/js/29.ae8d76f2.js"><link rel="prefetch" href="/feadvance/assets/js/30.b8b1c3e4.js"><link rel="prefetch" href="/feadvance/assets/js/4.4e98198a.js"><link rel="prefetch" href="/feadvance/assets/js/5.3ccfad5b.js"><link rel="prefetch" href="/feadvance/assets/js/6.f63b3cfc.js"><link rel="prefetch" href="/feadvance/assets/js/7.eb78f512.js"><link rel="prefetch" href="/feadvance/assets/js/8.fb68005e.js"><link rel="prefetch" href="/feadvance/assets/js/9.fb4f30db.js">
    <link rel="stylesheet" href="/feadvance/assets/css/0.styles.9896fb68.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/feadvance/" class="home-link router-link-active"><img src="/feadvance/images/icons/ironMan.png" alt="前端进阶之路" class="logo"> <span class="site-name can-hide">前端进阶之路</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/feadvance/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/feadvance/test/" class="nav-link">
  Test
</a></div><div class="nav-item"><a href="https://www.baidu.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Baidu
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/feadvance/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/feadvance/test/" class="nav-link">
  Test
</a></div><div class="nav-item"><a href="https://www.baidu.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Baidu
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/feadvance/views/html-doc/" class="sidebar-link">HTML</a></li><li><a href="/feadvance/views/css-doc/" class="sidebar-link">CSS</a></li><li><a href="/feadvance/views/js-doc/" aria-current="page" class="active sidebar-link">JavaScript</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/feadvance/views/js-doc/#js中的7种数据类型" class="sidebar-link">js中的7种数据类型</a></li><li class="sidebar-sub-header"><a href="/feadvance/views/js-doc/#堆、栈内存和队列" class="sidebar-link">堆、栈内存和队列</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/feadvance/views/js-doc/#_1-栈数据结构" class="sidebar-link">1. 栈数据结构</a></li><li class="sidebar-sub-header"><a href="/feadvance/views/js-doc/#_2-堆数据结构" class="sidebar-link">2. 堆数据结构</a></li><li class="sidebar-sub-header"><a href="/feadvance/views/js-doc/#_3-队列" class="sidebar-link">3. 队列</a></li></ul></li><li class="sidebar-sub-header"><a href="/feadvance/views/js-doc/#深浅克隆" class="sidebar-link">深浅克隆</a></li><li class="sidebar-sub-header"><a href="/feadvance/views/js-doc/#作用域-作用域链" class="sidebar-link">作用域 作用域链</a></li><li class="sidebar-sub-header"><a href="/feadvance/views/js-doc/#闭包" class="sidebar-link">闭包</a></li><li class="sidebar-sub-header"><a href="/feadvance/views/js-doc/#变量赋值的过程" class="sidebar-link">变量赋值的过程</a></li><li class="sidebar-sub-header"><a href="/feadvance/views/js-doc/#面向对象" class="sidebar-link">面向对象</a></li><li class="sidebar-sub-header"><a href="/feadvance/views/js-doc/#eventloop" class="sidebar-link">EventLoop</a></li><li class="sidebar-sub-header"><a href="/feadvance/views/js-doc/#数据劫持" class="sidebar-link">数据劫持</a></li><li class="sidebar-sub-header"><a href="/feadvance/views/js-doc/#从输入网址到页面显示的过程" class="sidebar-link">从输入网址到页面显示的过程</a></li><li class="sidebar-sub-header"><a href="/feadvance/views/js-doc/#js-如何实现一个类" class="sidebar-link">JS 如何实现一个类</a></li><li class="sidebar-sub-header"><a href="/feadvance/views/js-doc/#js-实现继承" class="sidebar-link">JS 实现继承</a></li><li class="sidebar-sub-header"><a href="/feadvance/views/js-doc/#原型链" class="sidebar-link">原型链</a></li><li class="sidebar-sub-header"><a href="/feadvance/views/js-doc/#this对象的理解" class="sidebar-link">this对象的理解</a></li><li class="sidebar-sub-header"><a href="/feadvance/views/js-doc/#跨域问题的解决方案和实现原理" class="sidebar-link">跨域问题的解决方案和实现原理</a></li><li class="sidebar-sub-header"><a href="/feadvance/views/js-doc/#get和post的区别" class="sidebar-link">get和post的区别</a></li><li class="sidebar-sub-header"><a href="/feadvance/views/js-doc/#jsonp的实现方式" class="sidebar-link">JSONP的实现方式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/feadvance/views/js-doc/#jsonp原理" class="sidebar-link">JSONP原理</a></li><li class="sidebar-sub-header"><a href="/feadvance/views/js-doc/#jsonp实现思路" class="sidebar-link">JSONP实现思路</a></li><li class="sidebar-sub-header"><a href="/feadvance/views/js-doc/#代码实现" class="sidebar-link">代码实现</a></li></ul></li><li class="sidebar-sub-header"><a href="/feadvance/views/js-doc/#前端的本地存储策略" class="sidebar-link">前端的本地存储策略</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/feadvance/views/js-doc/#cookie" class="sidebar-link">cookie</a></li><li class="sidebar-sub-header"><a href="/feadvance/views/js-doc/#sessionstorage" class="sidebar-link">sessionStorage</a></li><li class="sidebar-sub-header"><a href="/feadvance/views/js-doc/#localstorage" class="sidebar-link">localStorage</a></li></ul></li><li class="sidebar-sub-header"><a href="/feadvance/views/js-doc/#性能调优" class="sidebar-link">性能调优</a></li></ul></li><li><a href="/feadvance/views/vue-doc/" class="sidebar-link">Vue</a></li><li><a href="/feadvance/views/algorithm-doc/" class="sidebar-link">Algorithm</a></li><li><section class="sidebar-group depth-0"><a href="/feadvance/views/professionalJs4th-doc/" class="sidebar-heading clickable"><span>ProfessionalJavaScript4th</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group is-sub-group depth-1"><a href="/feadvance/views/professionalJs4th-doc/basic/" class="sidebar-heading clickable open"><span>基本知识</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/feadvance/views/professionalJs4th-doc/basic/chapter-1.html" class="sidebar-link">第1章 什么是JavaScript</a></li><li><a href="/feadvance/views/professionalJs4th-doc/basic/chapter-2.html" class="sidebar-link">第2章 HTML中的JavaScript</a></li><li><a href="/feadvance/views/professionalJs4th-doc/basic/chapter-3.html" class="sidebar-link">第3章 语言基础</a></li><li><a href="/feadvance/views/professionalJs4th-doc/basic/chapter-4.html" class="sidebar-link">第4章 变量、作用域与内存</a></li><li><a href="/feadvance/views/professionalJs4th-doc/basic/chapter-5.html" class="sidebar-link">第5章 基本引用类型</a></li><li><a href="/feadvance/views/professionalJs4th-doc/basic/chapter-6.html" class="sidebar-link">第6章 集合引用类型</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><a href="/feadvance/views/professionalJs4th-doc/BOMAndDOM/" class="sidebar-heading clickable"><span>BOM和DOM</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/feadvance/views/professionalJs4th-doc/BOMAndDOM/chapter-12.html" class="sidebar-link">第12章 BOM</a></li><li><a href="/feadvance/views/professionalJs4th-doc/BOMAndDOM/chapter-13.html" class="sidebar-link">第13章 客户端检测</a></li><li><a href="/feadvance/views/professionalJs4th-doc/BOMAndDOM/chapter-14.html" class="sidebar-link">第14章 DOM</a></li><li><a href="/feadvance/views/professionalJs4th-doc/BOMAndDOM/chapter-15.html" class="sidebar-link">第15章 DOM扩展</a></li><li><a href="/feadvance/views/professionalJs4th-doc/BOMAndDOM/chapter-16.html" class="sidebar-link">第16章 DOM2和DOM3</a></li><li><a href="/feadvance/views/professionalJs4th-doc/BOMAndDOM/chapter-17.html" class="sidebar-link">第17章 事件</a></li><li><a href="/feadvance/views/professionalJs4th-doc/BOMAndDOM/chapter-18.html" class="sidebar-link">第18章 动画与canvas图形</a></li><li><a href="/feadvance/views/professionalJs4th-doc/BOMAndDOM/chapter-19.html" class="sidebar-link">第19章 表单脚本</a></li></ul></section></li><li><a href="/feadvance/views/professionalJs4th-doc/advance/" class="sidebar-link">进阶内容</a></li><li><a href="/feadvance/views/professionalJs4th-doc/API/" class="sidebar-link">JavaScriptAPI</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="javascript-部分"><a href="#javascript-部分" class="header-anchor">#</a> Javascript 部分 <img src="data:image/png;base64,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" width="50" style="margin-top:-15px;"></h1> <h2 id="js中的7种数据类型"><a href="#js中的7种数据类型" class="header-anchor">#</a> js中的7种数据类型</h2> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>nunsb so fun</p></div> <p>1、基本类型</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>number<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> string<span class="token punctuation">,</span> boolean<span class="token punctuation">,</span> <span class="token function">symbol</span><span class="token punctuation">(</span>es6新增<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>2、引用类型</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code> object
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>3、数据类型检测</p> <ul><li><p>typeof</p> <p>对于基本数据类型来说，除了null都可以检测出正确的类型（typeof null === 'object'）</p> <p>对于引用类型来说，可以正常检测</p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">typeof</span> <span class="token keyword">new</span> <span class="token class-name">Function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">;</span>    <span class="token comment">// true</span>
<span class="token keyword">typeof</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'symbol'</span><span class="token punctuation">;</span>   <span class="token comment">// true</span>
<span class="token keyword">typeof</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'object'</span>  <span class="token comment">// true</span>
补充：
<span class="token keyword">typeof</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'object'</span>   <span class="token comment">//true  不过数组并不属于七种数据类型之一</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li><p>instanceof</p> <p>是通过原型链来检测数据类型的</p></li> <li><p>Object.prototype.toString.call()</p> <p>比较完美的方案</p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 检测数据类型
<span class="token comment">// 可以通过 toString() 来获取每个对象的类型。为了每个对象都能通过 Object.prototype.toString() 来检测，需要以 Function.prototype.call() 或者 Function.prototype.apply() 的形式来调用，传递要检查的对象作为第一个参数，称为 thisArg。</span>

<span class="token keyword">var</span> toString <span class="token operator">=</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>toString<span class="token punctuation">;</span>

<span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object Date]</span>
<span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object String]</span>
<span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>Math<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object Math]</span>

<span class="token comment">//Since JavaScript 1.8.5</span>
<span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object Undefined]</span>
<span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object Null]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>4、数据类型的转换(==)</p> <ul><li>对象 == 字符串， 对象.toString() 转化为字符串。</li> <li>null == undefined,但是和其他值比较就不相等了。</li> <li>NaN != NaN。</li> <li>剩下的都是转化为数字再做比较： '1' == true ，相当于 1 == 1；(当把一个对象转化为数字时，是先将它toString(),再number(对象.toString()))。</li> <li>对于对象来说，属性名不能重复，且一般都为字符串（也可以为Boolean，null，undefined，symbol，number），数字0和字符串0相等，都为字符串0。数组是特殊的对象，它的属性名是索引，索引为数字。</li></ul> <details class="custom-block details"><summary>查看代码</summary> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 例一</span>
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    b <span class="token operator">=</span> <span class="token string">'0'</span><span class="token punctuation">,</span>
    c <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
a<span class="token punctuation">[</span>b<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'Hello'</span><span class="token punctuation">;</span>
a<span class="token punctuation">[</span>c<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'World'</span><span class="token punctuation">;</span>
d1<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> a<span class="token punctuation">[</span>b<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// World</span>
<span class="token comment">// 数字0 会被转化为 字符串0</span>

<span class="token comment">// 例二</span>
<span class="token keyword">let</span> a2 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    b2 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    c2 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
a2<span class="token punctuation">[</span>b2<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'hello2'</span><span class="token punctuation">;</span>
a2<span class="token punctuation">[</span>c2<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'world2'</span><span class="token punctuation">;</span>
d2<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> a2<span class="token punctuation">[</span>b2<span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">// hello2</span>
<span class="token comment">// Symbol 创建的是唯一值</span>

<span class="token comment">//例三</span>
<span class="token keyword">let</span> a3 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    b3 <span class="token operator">=</span> <span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token string">'ls'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    c3 <span class="token operator">=</span> <span class="token punctuation">{</span>
        age<span class="token operator">:</span> <span class="token number">25</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
a3<span class="token punctuation">[</span>b3<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'Hello3'</span><span class="token punctuation">;</span>
a3<span class="token punctuation">[</span>c3<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'World3'</span><span class="token punctuation">;</span>
d3<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> a3<span class="token punctuation">[</span>b3<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// Hello3</span>
<span class="token comment">// 对象键名会被转化为字符串值 [object Object]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div></details> <h2 id="堆、栈内存和队列"><a href="#堆、栈内存和队列" class="header-anchor">#</a> 堆、栈内存和队列</h2> <p><strong>JavaScript内存空间分为堆、栈、池、队列</strong>。堆内存存储引用类型<strong>值</strong>。栈内存存储<strong>变量</strong>、基本类型<strong>值</strong>（因为原始值有固定大小）和引用类型的<strong>指针</strong>。池又称为常量池，用于存放常量。队列放在下面说。</p> <h3 id="_1-栈数据结构"><a href="#_1-栈数据结构" class="header-anchor">#</a> 1. 栈数据结构</h3> <p>栈数据结构具有<strong>先进后出</strong>（FILO）的特性，可以用乒乓球盒来理解它，最先放进去的球最后才能取出来。</p> <img src="/feadvance/assets/img/FILO.009f6861.png"> <p>例如以下代码在栈内存中的体现：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> a<span class="token punctuation">;</span>
a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><img src="/feadvance/assets/img/stackExample.77f25143.png"> <p>可以看到基本类型的变量名和值都存放在栈内存中，当把变量a赋值给变量b时，栈会开辟新内存来存储b，并且修改a不会对b造成影响。</p> <h3 id="_2-堆数据结构"><a href="#_2-堆数据结构" class="header-anchor">#</a> 2. 堆数据结构</h3> <p>堆数据结构是一种<strong>无序的树状结构</strong>。它满足<code>key-value</code>键值对的存储方式，我们能够通过<code>key</code>名查找到对应的<code>value</code>。比如在书架上，我们通过书名就可以找到对应的书籍。</p> <img src="/feadvance/assets/img/heap.b4b072eb.png"> <p>在js中堆内存一般用于存储<strong>引用类型的数据</strong>，这是因为引用类型的数据具有拓展性。但是对于引用类型数据的<strong>引用地址是固定</strong>的，它是一个十六进制的内存地址（如a = AAAFFF000）。所以<strong>引用还是存在于栈内存中</strong>。</p> <p>我们可以用内存图模拟如下代码：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> a<span class="token punctuation">;</span>
a<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><img src="/feadvance/assets/img/heapExample.a8626243.png"> <p>当我们创建数组<code>a</code>时，栈内存中只保存了<strong>变量</strong><code>a</code>和指向堆内存中数组的<strong>引用地址</strong>。当我们把<code>a</code>复制给<code>b</code>时，其实只是<strong>复制了一个指针</strong>，两者指向堆内存中的同一个数组，所以无论谁修改，都会影响彼此。这也就是浅拷贝。关于深浅拷贝，可以点击<a href="#深浅克隆">深浅克隆</a>查看。</p> <h3 id="_3-队列"><a href="#_3-队列" class="header-anchor">#</a> 3. 队列</h3> <p>队列具有<strong>先进先出</strong>（FIFO）的特性，与栈内存不同的是，<strong>栈内存只有一个口</strong>，出栈入栈都在这个口进行。而<strong>队列有一个出口一个入口</strong>，可以用排队取餐来理解，先排队的先取到餐也就先出去。</p> <img src="/feadvance/assets/img/queue.052306b4.png"> <h2 id="深浅克隆"><a href="#深浅克隆" class="header-anchor">#</a> 深浅克隆</h2> <ul><li>对象（数组）的深拷贝与浅拷贝</li> <li>浅拷贝是只拷贝第一层(涉及到堆的引用)</li></ul> <div class="custom-block tip"><p class="custom-block-title">浅拷贝的方法</p> <ul><li>for in 循环</li> <li>ES6展开运算符</li></ul> <details class="custom-block details"><summary>查看代码</summary> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    a<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
    b<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    c<span class="token operator">:</span> <span class="token punctuation">{</span>
        x<span class="token operator">:</span> <span class="token number">100</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    d<span class="token operator">:</span> <span class="token regex">/^\d+$/</span><span class="token punctuation">,</span>
    e<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function-variable function">f</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'xx'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 浅拷贝</span>
<span class="token comment">// ES6 展开运算符</span>
<span class="token punctuation">{</span>
    <span class="token keyword">let</span> obj2 <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>obj <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// ES5</span>
<span class="token keyword">let</span> obj2 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 只遍历obj的私有属性</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>obj<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    obj2<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> obj2<span class="token punctuation">,</span> obj <span class="token operator">===</span> obj2<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div></details></div> <div class="custom-block tip"><p class="custom-block-title">深拷贝的方法</p> <ul><li>json.stringify=&gt;json.parse；(要注意函数、正则、new Date（）在stringify的过程中会有问题)</li> <li>递归</li></ul> <img src="/feadvance/assets/img/shallowClone.31b0a4ef.png" width="75%" style="margin-left:100px;"> <details class="custom-block details"><summary>查看代码</summary> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    a<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
    b<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    c<span class="token operator">:</span> <span class="token punctuation">{</span>
        x<span class="token operator">:</span> <span class="token number">100</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    d<span class="token operator">:</span> <span class="token regex">/^\d+$/</span><span class="token punctuation">,</span>
    e<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function-variable function">f</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'xx'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 深拷贝</span>
<span class="token comment">// 将对象转化为json字符串，项目中可以这么用</span>
<span class="token keyword">let</span> obj3 <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
obj3 <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>obj3<span class="token punctuation">)</span><span class="token punctuation">;</span>
obj3<span class="token punctuation">.</span>c<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> obj3<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 封装递归函数</span>
<span class="token keyword">function</span> <span class="token function">deepClone</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> obj <span class="token operator">!==</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">RegExp</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">Date</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">Function</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Function</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 不直接创建空对象的目的：克隆的结果和之前保持相同的隐藏类，可以提高性能</span>
    <span class="token keyword">let</span> newObj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">obj<span class="token punctuation">.</span>constructor</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 递归</span>
            newObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> newObj<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> obj4 <span class="token operator">=</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
obj4<span class="token punctuation">.</span>c<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">2000</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj4<span class="token punctuation">,</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div></details></div> <h2 id="作用域-作用域链"><a href="#作用域-作用域链" class="header-anchor">#</a> 作用域 作用域链</h2> <ul><li>函数的嵌套形成作用域的层级关系，当函数执行时，从当前作用域开始查找变量，没查到的会向上层作用域查找，直至全局，这就是作用域链。</li> <li>在js中，作用域为function(){}内的区域，称为函数作用域。</li> <li>全局函数无法查看局部函数的内部细节，但是局部函数可以查看其上层函数的内部细节，直到全局。</li></ul> <h2 id="闭包"><a href="#闭包" class="header-anchor">#</a> 闭包</h2> <ul><li>闭包的<strong>原理</strong>就是作用域链，比如函数a内部有个函数b，b可以访问到a里的变量，那么函数b就是闭包</li> <li>闭包的<strong>关键</strong>在于外部函数调用完成后，它的<strong>变量对象应该被销毁</strong>，但是闭包的存在使我们依然可以访问外部函数的变量对象。所以<code>js</code>垃圾回收机制检测到外部函数的变量对象中还有变量被引用，这个变量对象不会被释放，所以我们要及时解除对闭包的引用，以顺利的进行垃圾回收</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> closure <span class="token operator">=</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">closure</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 0</span>
closure <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// 释放对闭包的引用</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><details class="custom-block details"><summary>查看代码</summary> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 闭包、执行上下文、堆、垃圾回收</span>
<span class="token keyword">let</span> test <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// number 4</span>
        <span class="token comment">// alert(i * 2);    // string 4</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">test</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 闭包</span>
<span class="token keyword">function</span> <span class="token constant">A</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">A</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>a <span class="token operator">+</span> b<span class="token operator">++</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>a<span class="token operator">++</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token constant">A</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//1</span>
<span class="token constant">A</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//4</span>
<span class="token constant">A</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//5</span>

<span class="token comment">// ++a 是先自身累加，再进行其他运算， a++ 是先进行其他运算，再自身累加，第二次调用（A（2））里使用的a是在上级执行环境中找到的，由于经过了第一次函数调用，a已经为2了。 GO（global object）中的a、b始终未用到。</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div></details> <h2 id="变量赋值的过程"><a href="#变量赋值的过程" class="header-anchor">#</a> 变量赋值的过程</h2> <ul><li>先创建一个变量，第二步准备值（本例中值指的是立即执行的函数），第三步把值和变量关联起来</li></ul> <h2 id="面向对象"><a href="#面向对象" class="header-anchor">#</a> 面向对象</h2> <ul><li>new 一个函数执行，也把它当做普通函数执行。</li> <li>new 创建实例，实例.方法执行 会找原型上的方法。</li> <li>变量提升：在当前执行环境中，所有代码执行前，把所有带var和function关键字的提前声明（var）和定义（function）。</li> <li>普通函数执行，return this 相当于 return window。</li> <li>普通函数执行，先进行形参赋值，然后进行代码赋值。</li> <li>当遇到连续多个new 或 连续多个typeof 时，从右向左计算。</li></ul> <div class="custom-block tip"><p class="custom-block-title">运算符优先级</p> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Operator_Precedence" target="b lank">MDN</a></p></div> <details class="custom-block details"><summary>查看代码</summary> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 例一</span>
<span class="token keyword">function</span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
Foo<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">Foo</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> <span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
Foo<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
<span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 4   变量提升阶段，未进行赋值，代码执行到的时候，赋值，log4替换log5</span>
<span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 1</span>
<span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// 1</span>
<span class="token keyword">new</span> <span class="token class-name">Foo<span class="token punctuation">.</span>getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 2</span>
<span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 3</span>
<span class="token keyword">new</span> <span class="token class-name">new</span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 3</span>

<span class="token comment">// 例二</span>
<span class="token keyword">function</span> <span class="token constant">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">A</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

Func<span class="token punctuation">.</span><span class="token constant">A</span> <span class="token operator">=</span> <span class="token constant">A</span><span class="token punctuation">;</span>

<span class="token class-name">Func</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// 这里注意，箭头函数没有原型链，也就是说没有constructor这个构造函数，所以不能被new</span>
    <span class="token comment">// A: () =&gt; {</span>
    <span class="token comment">//     console.log(3);</span>
    <span class="token comment">// }</span>
    <span class="token function-variable function">A</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token constant">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//1</span>
Func<span class="token punctuation">.</span><span class="token constant">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//1</span>
<span class="token function">Func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token constant">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//2</span>
<span class="token keyword">new</span> <span class="token class-name">Func<span class="token punctuation">.</span>A</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//1</span>
<span class="token keyword">new</span> <span class="token class-name">Func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token constant">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//3</span>
<span class="token keyword">new</span> <span class="token class-name">new</span> <span class="token function">Func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token constant">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 报错 箭头函数没有new         </span>

<span class="token comment">// 例三</span>
<span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> y <span class="token operator">=</span> <span class="token punctuation">{</span>
    x<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
    <span class="token comment">// z 里的自执行函数在变量赋值阶段就会执行，且只执行这一次</span>
    z<span class="token operator">:</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">*=</span> x<span class="token punctuation">;</span> <span class="token comment">// 这里的this指的是window,this.x指的是最外层var的x</span>
        x <span class="token operator">+=</span> <span class="token number">2</span><span class="token punctuation">;</span>  <span class="token comment">// 这里的x指的是自调函数的参数</span>
        <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">*=</span> n<span class="token punctuation">;</span> <span class="token comment">// 这里的this在m(4)调用的时候指的是window,this.x指的是最外层var的x，在y.z(5)调用的时候this指的是 y, this.x 是 y.x，也就是3</span>
            x <span class="token operator">+=</span> <span class="token number">3</span><span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>  <span class="token comment">//2</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> m <span class="token operator">=</span> y<span class="token punctuation">.</span>z<span class="token punctuation">;</span>
<span class="token function">m</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 7</span>
y<span class="token punctuation">.</span><span class="token function">z</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 10</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">.</span>z<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 16</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br></div></div></details> <img src="/feadvance/assets/img/oo.a4e7b5ff.png" width="65%" style="margin-left:100px;"> <h2 id="eventloop"><a href="#eventloop" class="header-anchor">#</a> EventLoop</h2> <ul><li>浏览器是多线程的，同时做很多事（加载css、js，发送请求、渲染图片等），JS是单线程的（浏览器只给了其一个线程来渲染）。</li> <li>同步代码：自上而下执行。</li> <li>异步：为了处理异步，浏览器提供了event queue事件队列，分为微任务队列和宏任务队列。主线程代码执行完了再执行event queue里的代码，在事件队列中，先执行微任务，再执行宏任务，直到宏任务执行完，浏览器空闲下来。
<ul><li>宏任务：延迟器、事件绑定、ajax</li> <li>微任务：async、await、promise</li></ul></li> <li>new promise会把里面的函数立即执行， new的时候属于同步，当执行resolve/reject时为异步的微任务，执行then/catch中的方法。</li></ul> <details class="custom-block details"><summary>查看代码</summary> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'async1 start'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
    <span class="token keyword">await</span> <span class="token function">async2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'async1 end'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 6</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'async2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'script start'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'setTimeout'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 8</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token comment">// 延迟为0 不代表0毫秒，代表浏览器的最小反应时间，一般为5ms</span>

<span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// new promise会把里面的函数立即执行</span>
<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'promise1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 4</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'promise2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 7</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'script end'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 5</span>

<span class="token comment">// script start</span>
<span class="token comment">// async1 start</span>
<span class="token comment">// async2</span>
<span class="token comment">// promise1</span>
<span class="token comment">// script end</span>
<span class="token comment">// async1 end</span>
<span class="token comment">// promise2</span>
<span class="token comment">// setTimeout</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div></details> <h2 id="数据劫持"><a href="#数据劫持" class="header-anchor">#</a> 数据劫持</h2> <ul><li>ES5: Object.defineProperty()</li> <li>ES6: proxy</li></ul> <details class="custom-block details"><summary>实现a==1 &amp;&amp; a==2 &amp;&amp; a==3</summary> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 方法一  数据类型转换</span>
<span class="token comment">// 1-1</span>
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>
    i<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token comment">// 重写 toString()</span>
    <span class="token comment">// ES6 的写法</span>
    <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token operator">++</span><span class="token keyword">this</span><span class="token punctuation">.</span>i<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//所有数据类型转换的第一步都是先调它的valueOf取得原始值，所以重写对象的toString()方法时，也可以用重写valueOf()方法来代替</span>
    <span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token operator">++</span><span class="token keyword">this</span><span class="token punctuation">.</span>i<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 1-2</span>
<span class="token keyword">let</span> d <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
d<span class="token punctuation">.</span>toString <span class="token operator">=</span> d<span class="token punctuation">.</span>shift<span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>d <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> d <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> d <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'条件成立：数据类型转换'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 等号两边有一边为number，则都转化为number，而对象转化为number之前要先执行object.toString()，a本身没有toString()方法，那么它会调用原型上的toString(),此时转化结果为[object Object],不成立，所以我们还要给a添加自己的toString()方法。</span>

<span class="token comment">// 方法二  数据劫持</span>
<span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>window<span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token operator">++</span>i<span class="token punctuation">;</span>
        <span class="token comment">// 这里为什么不使用++a，而使用++i ?</span>
        <span class="token comment">// 因为 ++a的意思为 a=a+1; 而在执行 'a+1'时，我们需要取得a，这时候就会触发a的get方法，就会死循环下去，超出最大调用栈，即栈溢出</span>
        <span class="token comment">//报错：Uncaught RangeError: Maximum call stack size exceeded</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'条件成立：数据劫持ES5'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 数据劫持 ES6</span>

<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> prop<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token operator">++</span>target<span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
obj<span class="token punctuation">.</span>num <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span>num <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> obj<span class="token punctuation">.</span>num <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> obj<span class="token punctuation">.</span>num <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'条件成立：数据劫持ES6'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br></div></div></details> <h2 id="从输入网址到页面显示的过程"><a href="#从输入网址到页面显示的过程" class="header-anchor">#</a> 从输入网址到页面显示的过程</h2> <ul><li>输入网址；</li> <li>发送到DNS（Domain Name System）服务器，并获取域名对应的web服务器对应的ip地址；</li> <li>与web服务器建立TCP连接；</li> <li>浏览器向web服务器发送http请求；</li> <li>web服务器响应请求，并返回指定url的数据（或错误信息，或重定向的新的url地址）；</li> <li>浏览器下载web服务器返回的数据及解析html源文件；</li> <li>生成DOM树，解析css和js，渲染页面，直至显示完成。</li></ul> <h2 id="js-如何实现一个类"><a href="#js-如何实现一个类" class="header-anchor">#</a> JS 如何实现一个类</h2> <ul><li>构造函数法（缺点是用到了this和prototype，编写复杂，可读性差）</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token constant">P</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>age</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">P</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">P</span><span class="token punctuation">(</span><span class="token string">'ls'</span><span class="token punctuation">,</span> <span class="token number">24</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
person<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li>ES6 class 关键字</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">P</span><span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>age</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">P</span><span class="token punctuation">(</span><span class="token string">'ls'</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
person<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="js-实现继承"><a href="#js-实现继承" class="header-anchor">#</a> JS 实现继承</h2> <ul><li>寄生组合式继承（通过借用构造函数继承属性，通过原型链的混成形式继承方法，用寄生式继承继承超类型的原型，再将结果指定给子类型的原型）</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">object</span><span class="token punctuation">(</span><span class="token parameter">o</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">function</span> <span class="token constant">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token class-name">F</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> o<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">inheritPrototype</span><span class="token punctuation">(</span><span class="token parameter">subType<span class="token punctuation">,</span>superType</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> prototype <span class="token operator">=</span> <span class="token function">object</span><span class="token punctuation">(</span>superType<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 创建对象</span>
    prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> subType<span class="token punctuation">;</span>    <span class="token comment">// 增强对象</span>
    subTyoe<span class="token punctuation">.</span>prototype <span class="token operator">=</span> prototype<span class="token punctuation">;</span>      <span class="token comment">// 指定对象</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">SuperType</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token string">'white'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">SuperType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Subtype</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>age</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">SuperType</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">inheritPrototype</span><span class="token punctuation">(</span>Subtype<span class="token punctuation">,</span>SuperType<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">SubType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayAge</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><ul><li>ES6 extends 关键字</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">ColorPoint</span> <span class="token keyword">extends</span> <span class="token class-name">Color</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>color</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">=</span> color<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">+</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">getResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="原型链"><a href="#原型链" class="header-anchor">#</a> 原型链</h2> <div class="custom-block tip"><p class="custom-block-title">描述原型链</p> <ul><li>遍历一个实例时，先遍历它本身的属性，再遍历它原型上的属性，一直遍历到Object。</li> <li>任何一个类（函数）都有原型对象，原型对象上至少有两个属性（constructor，proto），constructor指向类（函数）本身，proto指向父类原型对象。
类（函数）通过prototype属性可以访问原型对象。</li> <li>类（函数）的实例可以直接访问原型对象（因为实例上有proto属性指向构造函数的原型对象）。</li></ul></div> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token class-name">P</span><span class="token punctuation">.</span>prototype <span class="token operator">===</span> person<span class="token punctuation">.</span>__proto__<span class="token punctuation">;</span>  <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><img src="/feadvance/assets/img/prototypeChain.3e7634fe.png" width="70%"> <div class="custom-block tip"><p class="custom-block-title">作用域链与原型链的区别</p> <ul><li>当访问一个变量时，解释器会先在当前作用域查找标识符，如果没有找到就去父作用域找，作用域链顶端是全局对象window，如果window都没有这个变量则报错。</li> <li>当在对象上访问某属性时，首先会查找当前对象，如果没有就顺着原型链往上找，原型链顶端是null，如果全程都没找到则返一个undefined，而不是报错。</li></ul></div> <h2 id="this对象的理解"><a href="#this对象的理解" class="header-anchor">#</a> this对象的理解</h2> <ul><li>普通函数中
<ul><li>this总是指向函数的直接调用者，没有就是window。</li> <li>如果有new关键字，this指向new出来的实例对象。</li> <li>在事件中，this指向触发这个事件的对象。</li></ul></li> <li>箭头函数中
<ul><li>箭头函数其实是没有this的，箭头函数中的this只取决于包裹箭头函数的第一个普通函数的this，另外对于箭头函数使用bind这类函数无效。</li> <li>函数体内的this对象，指的是定义时所在作用域的对象，而不是调用时所在的作用域的对象。</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 普通函数</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    a<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    foo<span class="token operator">:</span> foo
<span class="token punctuation">}</span>
obj<span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
<span class="token keyword">const</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//undefined</span>

<span class="token comment">// 箭头函数</span>
<span class="token keyword">function</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//Window</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><ul><li><p>this绑定</p> <ul><li>默认绑定
<ul><li>函数调用时无任何调用前缀的情景。</li></ul></li> <li>隐式绑定
<ul><li>如果函数调用时，前面存在调用它的对象，那么this就会隐式绑定到这个对象上。</li> <li>如果函数调用前存在多个对象，this指向距离调用自己最近的对象。</li> <li>在特定情况下会存在隐式绑定丢失的问题，最常见的就是作为参数传递以及变量赋值。</li></ul></li> <li>显示绑定 apply、call、bind
<ul><li>这三个方法都是为了改变普通函数函数体内部的this指向。</li> <li>其中apply和call会立即调用，而bind会返回一个函数，需要手动调用。</li> <li>三者第一个参数都是this要指向的对象，利用后续参数传参，call和bind传入参数列表，而apply传入数组。</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">fruit</span><span class="token punctuation">(</span><span class="token parameter">arg</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    arg <span class="token operator">=</span> arg <span class="token operator">||</span> <span class="token string">''</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> arg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">fruit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// ls</span>

<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    name <span class="token operator">:</span> <span class="token string">'s'</span>
<span class="token punctuation">}</span>
<span class="token function">fruit</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token string">'aaa'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// saaa</span>
<span class="token function">fruit</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'bbb'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// sbbb</span>
<span class="token function">fruit</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token string">'ccc'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// sccc</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><ul><li>new 绑定
<ul><li>new 的过程（这个过程称为构造调用）
<ul><li>创建一个空对象，将它的引用赋给 this，继承函数的原型。</li> <li>通过 this 将属性和方法添加至这个对象</li> <li>最后返回 this 指向的新对象，也就是实例（如果没有手动返回其他的对象）</li></ul></li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'new 绑定~'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> echo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
echo<span class="token punctuation">.</span>name<span class="token comment">//new 绑定~</span>
<span class="token comment">// 在上方代码中，构造调用创建了一个新对象echo，而在函数体内，this将指向新对象echo上（可以抽象理解为新对象就是this）。</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li><p>this绑定的优先级</p> <ul><li>显式绑定 &gt; 隐式绑定 &gt; 默认绑定</li> <li>new绑定 &gt; 隐式绑定 &gt; 默认绑定</li> <li>显示绑定与new绑定同时使用会报错（call/bind/apply is not a function）</li></ul></li></ul> <h2 id="跨域问题的解决方案和实现原理"><a href="#跨域问题的解决方案和实现原理" class="header-anchor">#</a> 跨域问题的解决方案和实现原理</h2> <ul><li>默认端口号：http20，https443，ftp21。</li> <li>跨域问题的产生：协议域名端口号有一个不一致都为跨域，浏览器禁止跨域访问。</li> <li>阶段：
<ul><li><p>jsonp</p> <ul><li>script、link、image标签不受跨域限制。如jQuery的cnd引入。</li> <li>问题：只有get请求（不安全、有缓存、传递信息有长度限制）</li></ul></li> <li><p>基于iframe的跨域解决方案</p> <ul><li>window.name</li> <li>document.domain</li> <li>location.hash</li> <li>post messgae</li></ul></li> <li><p>CORS跨域资源共享</p> <ul><li>前端axios</li> <li>后端设置允许跨域</li></ul></li> <li><p>基于http proxy实现跨域请求</p> <ul><li>开发环境：基于webpack提供的devserver</li> <li>生产环境：Nginx反向代理</li></ul></li></ul></li></ul> <img src="/feadvance/assets/img/ajax.96c470b8.png" width="65%" style="margin-left:100px;"> <img src="/feadvance/assets/img/jsonp.cc1942d9.png" width="65%" style="margin-left:100px;"> <img src="/feadvance/assets/img/jsonp1.d3066129.png" width="65%" style="margin-left:100px;"> <h2 id="get和post的区别"><a href="#get和post的区别" class="header-anchor">#</a> get和post的区别</h2> <ul><li><code>get</code>通过<code>url</code>传递参数，用户可以看到和修改参数，<code>post</code>不可以，相对<code>get</code>更安全</li> <li><code>get</code>传递参数有长度限制，一般不可超过2000个字符，大小不能超过2kb，而<code>post</code>传递的数据量较大，默认不受限制</li> <li><code>get</code>用于从服务端获取信息，<code>post</code>用于向服务端传递信息</li></ul> <h2 id="jsonp的实现方式"><a href="#jsonp的实现方式" class="header-anchor">#</a> JSONP的实现方式</h2> <h3 id="jsonp原理"><a href="#jsonp原理" class="header-anchor">#</a> JSONP原理</h3> <p><code>JSONP</code>全称为<code>json with padding</code>，是解决跨域问题的一种方案。</p> <p>由于同源策略的限制，浏览器只允许请求同域（协议名、域名和端口号都相同）内的资源。而<code>script</code>、<code>link</code>、<code>image</code>元素不受此限制，所以我们可以利用<code>script</code>标签的开放策略从其他域获取数据。</p> <h3 id="jsonp实现思路"><a href="#jsonp实现思路" class="header-anchor">#</a> JSONP实现思路</h3> <ol><li>参数需要重组为<code>get</code>传参的形式</li> <li>服务端返回的数据格式不是<code>json</code>而是<code>JavaScript</code>，所以<code>contentType</code>为<code>application/javascript</code>，内容格式为<code>callbackFunction(json)</code></li> <li>因为<code>script</code>加载完成后，它的执行上下文是<code>window</code>对象，所以<code>callback</code>回调函数要挂载到<code>window</code>上</li> <li>我们可能同时发起多个<code>jsonp</code>请求，所以回调函数的命名要具有唯一性</li> <li>请求结束后要移除本次请求产生的<code>script</code>标签和挂载在<code>window</code>上的回调函数，防止内存泄漏</li></ol> <h3 id="代码实现"><a href="#代码实现" class="header-anchor">#</a> 代码实现</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// json参数转query</span>
<span class="token keyword">function</span> <span class="token function">getQuery</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> params <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> i <span class="token keyword">in</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        params <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;</span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 如果参数是空对象就直接返回 ? 用于拼接callback</span>
    params <span class="token operator">=</span> params<span class="token punctuation">.</span>length <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">?</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>params<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> <span class="token string">'?'</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> params<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 主体方法</span>
<span class="token keyword">function</span> <span class="token function">jsonp</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> url<span class="token punctuation">,</span> data<span class="token punctuation">,</span> callback <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> con <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">'head'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> callbackFnName <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 保持回调函数命名唯一性</span>
    <span class="token keyword">const</span> src <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">getQuery</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">callback=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>callbackFnName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span> <span class="token comment">// script标签的src</span>
    <span class="token keyword">const</span> script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'script'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    script<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">'text/javascript'</span><span class="token punctuation">;</span>
    script<span class="token punctuation">.</span>src <span class="token operator">=</span> src<span class="token punctuation">;</span>
    con<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        window<span class="token punctuation">[</span>callbackFnName<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
            con<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">delete</span> window<span class="token punctuation">[</span>callbackFnName<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 异常处理</span>
        script<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            con<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">delete</span> window<span class="token punctuation">[</span>callbackFnName<span class="token punctuation">]</span><span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'some error appeared!'</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token comment">// 调用</span>
<span class="token function">jsonp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    url<span class="token operator">:</span> <span class="token string">'www.baidu.com'</span><span class="token punctuation">,</span>
    data<span class="token operator">:</span> <span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token string">'ls'</span><span class="token punctuation">,</span>
        age<span class="token operator">:</span> <span class="token number">22</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">callback</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// res是服务端返回的数据</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br></div></div><h2 id="前端的本地存储策略"><a href="#前端的本地存储策略" class="header-anchor">#</a> 前端的本地存储策略</h2> <h3 id="cookie"><a href="#cookie" class="header-anchor">#</a> cookie</h3> <p><code>cookie</code>是h5之前本地存储的主要方式，用法如下：</p> <ul><li>设置值：<code>document.cookie = &quot;username=ls&quot;</code></li> <li>读取值：<code>document.cookie</code> <code>cookie</code>只能存储4kb以内的数据，并且在读取<code>cookie</code>时，我们获得的数据格式是<code>username=ls; age=12</code>这样的，无法通过<code>json.parse</code>拿到<code>json</code>数据，还需要单独处理，比较麻烦。除此之外，<code>cookie</code>中的数据还会在浏览器发起请求时被携带在请求头上，污染请求。</li></ul> <h3 id="sessionstorage"><a href="#sessionstorage" class="header-anchor">#</a> sessionStorage</h3> <p><code>sessionStorage</code>是一个全局对象，数据以键值对的方式存储，用法如下：</p> <ul><li>设置值：<code>sessionStorage.setItem(key, value)</code></li> <li>读取值：<code>sessionStorage.getItem(key)</code></li> <li>删除值：<code>sessionStorage.removeItem(key)</code></li></ul> <p><code>sessionStorage</code>中只能保存字符串类型的值，所以需要先将对象转换为<code>json</code>字符串再进行存储，另外存储的数据大小相较<code>cookie</code>大了很多。<code>sessionStorage</code>和<code>cookie</code>的生命周期相同，都处在一个会话周期内，浏览器关闭或标签页关闭，数据会被清空。此外，同一个网站在不同标签页打开，<code>sessionStorage</code>的数据不能共享。</p> <h3 id="localstorage"><a href="#localstorage" class="header-anchor">#</a> localStorage</h3> <p><code>localStorage</code>的用法与<code>sessionStorage</code>相同，它有如下特点：</p> <ul><li>数据存储量大</li> <li>不会被携带至请求头</li> <li>所有标签页可以共享数据</li> <li>除非手动删除，否则数据一直存在</li></ul> <h2 id="性能调优"><a href="#性能调优" class="header-anchor">#</a> 性能调优</h2> <ul><li><p>优先使用<code>const</code>、<code>let</code>，尽量避免使用<code>var</code></p></li> <li><p>减少使用闭包和全局变量，如果用了要及时置为<code>null</code>来解除引用，垃圾回收</p></li> <li><p>在创建对象时，尽量在构造函数中声明好它们的公共属性与方法，这样它们的实例会共享相同的<strong>隐藏类</strong>，但是动态增删对象实例的属性，会使得它们不再拥有相同的隐藏类，所以在不需要某个属性时，可以置为<code>null</code></p></li> <li><p>尽量降低页面重绘和回流的次数</p></li> <li><p>在较简单的页面，减少<code>css</code>的选择器嵌套层级，因为<code>CSS</code>的浏览器渲染机制是从右向左的，如下例：</p></li></ul> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token comment">/* A */</span>
<span class="token selector">a</span> <span class="token punctuation">{</span>...<span class="token punctuation">}</span>
<span class="token comment">/* B */</span>
<span class="token selector">div a</span> <span class="token punctuation">{</span>...<span class="token punctuation">}</span>
<span class="token comment">/* A 的性能会比 B 更好。 */</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>DNS预解析。DNS解析需要时间，所以可以通过预解析来预先获得域名对应的ip，可以加快首屏加载速度</li></ul> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dns-prefetch<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>www.baidu.com<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>vue 路由懒加载</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;@/views/index.vue&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> resolve<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><p>vue 打包开启<code>gzip</code>压缩，忽略<code>vender</code>文件，减小<code>app.js</code>的体积，加快首屏渲染</p></li> <li><p>图片懒加载，把所有<code>img</code>元素通过<code>data-src</code>属性设置为一张<code>1px</code>的图片地址，这样只会请求一次。等到元素出现在可视区域时，才设置真正的图片路径。可以根据元素相对顶点的距离<code>&lt;=</code>窗口高度+滚动的距离判断元素在视野内</p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> imgs <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">)</span>
<span class="token comment">// 获取可视区域高度</span>
<span class="token keyword">const</span> viewHeight <span class="token operator">=</span> window<span class="token punctuation">.</span>innerHeight <span class="token operator">||</span> window<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>viewHeight<span class="token punctuation">,</span>imgs<span class="token punctuation">)</span>
<span class="token keyword">function</span> <span class="token function">loadImg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>imgs<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>imgs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>top<span class="token punctuation">)</span>
    <span class="token keyword">let</span> dis <span class="token operator">=</span> viewHeight <span class="token operator">-</span> imgs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>top
    <span class="token keyword">if</span><span class="token punctuation">(</span>dis<span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        imgs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>src <span class="token operator">=</span> imgs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'data-src'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">loadImg</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'scroll'</span><span class="token punctuation">,</span>loadImg<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><ul><li>有良好的编码习惯，做好组件封装和公共样式等，遵循模块化开发</li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">3/27/2021, 5:14:25 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/feadvance/views/css-doc/" class="prev">
        CSS
      </a></span> <span class="next"><a href="/feadvance/views/vue-doc/">
        Vue
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/feadvance/assets/js/app.f074b184.js" defer></script><script src="/feadvance/assets/js/2.5918a041.js" defer></script><script src="/feadvance/assets/js/3.e4899730.js" defer></script>
  </body>
</html>
