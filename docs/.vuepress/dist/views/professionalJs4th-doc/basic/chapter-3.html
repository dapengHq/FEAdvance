<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>第3章 语言基础 # | 前端进阶之路</title>
    <meta name="generator" content="VuePress 1.5.4">
    <link rel="icon" href="/images/icons/groot.png">
    <meta name="description" content="Just Play Around">
    <link rel="preload" href="/assets/css/0.styles.c122cf0b.css" as="style"><link rel="preload" href="/assets/js/app.0164061c.js" as="script"><link rel="preload" href="/assets/js/2.75c81597.js" as="script"><link rel="preload" href="/assets/js/26.4611b5d7.js" as="script"><link rel="prefetch" href="/assets/js/10.f1b3ea65.js"><link rel="prefetch" href="/assets/js/11.956a3ca9.js"><link rel="prefetch" href="/assets/js/12.5ae7ddc2.js"><link rel="prefetch" href="/assets/js/13.66dcb831.js"><link rel="prefetch" href="/assets/js/14.001ce991.js"><link rel="prefetch" href="/assets/js/15.19387510.js"><link rel="prefetch" href="/assets/js/16.cc8c08e7.js"><link rel="prefetch" href="/assets/js/17.b7355b0c.js"><link rel="prefetch" href="/assets/js/18.139ea8de.js"><link rel="prefetch" href="/assets/js/19.83f3b564.js"><link rel="prefetch" href="/assets/js/20.947f8cc0.js"><link rel="prefetch" href="/assets/js/21.5396f532.js"><link rel="prefetch" href="/assets/js/22.3ae3f1f9.js"><link rel="prefetch" href="/assets/js/23.c26aa518.js"><link rel="prefetch" href="/assets/js/24.a47b654c.js"><link rel="prefetch" href="/assets/js/25.32f4eaa6.js"><link rel="prefetch" href="/assets/js/27.6d50c3a1.js"><link rel="prefetch" href="/assets/js/28.c9586551.js"><link rel="prefetch" href="/assets/js/29.6b55690a.js"><link rel="prefetch" href="/assets/js/3.f9fad6c2.js"><link rel="prefetch" href="/assets/js/30.e80b8970.js"><link rel="prefetch" href="/assets/js/4.50ebe874.js"><link rel="prefetch" href="/assets/js/5.1c5dc32c.js"><link rel="prefetch" href="/assets/js/6.2201d854.js"><link rel="prefetch" href="/assets/js/7.b083ca39.js"><link rel="prefetch" href="/assets/js/8.98d1463f.js"><link rel="prefetch" href="/assets/js/9.1fbe04d2.js">
    <link rel="stylesheet" href="/assets/css/0.styles.c122cf0b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/images/icons/ironMan.png" alt="前端进阶之路" class="logo"> <span class="site-name can-hide">前端进阶之路</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/test/" class="nav-link">
  Test
</a></div><div class="nav-item"><a href="https://www.baidu.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Baidu
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/test/" class="nav-link">
  Test
</a></div><div class="nav-item"><a href="https://www.baidu.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Baidu
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/views/html-doc/" class="sidebar-link">HTML</a></li><li><a href="/views/css-doc/" class="sidebar-link">CSS</a></li><li><a href="/views/js-doc/" class="sidebar-link">JavaScript</a></li><li><a href="/views/vue-doc/" class="sidebar-link">Vue</a></li><li><a href="/views/algorithm-doc/" class="sidebar-link">Algorithm</a></li><li><section class="sidebar-group depth-0"><a href="/views/professionalJs4th-doc/" class="sidebar-heading clickable router-link-active open"><span>ProfessionalJavaScript4th</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group is-sub-group depth-1"><a href="/views/professionalJs4th-doc/basic/" class="sidebar-heading clickable router-link-active open"><span>基本知识</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/views/professionalJs4th-doc/basic/chapter-1.html" class="sidebar-link">第1章 什么是JavaScript</a></li><li><a href="/views/professionalJs4th-doc/basic/chapter-2.html" class="sidebar-link">第2章 HTML中的JavaScript</a></li><li><a href="/views/professionalJs4th-doc/basic/chapter-3.html" aria-current="page" class="active sidebar-link">第3章 语言基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/professionalJs4th-doc/basic/chapter-3.html#_3-1-语法" class="sidebar-link">3.1 语法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/professionalJs4th-doc/basic/chapter-3.html#_3-1-1-区分大小写" class="sidebar-link">3.1.1 区分大小写</a></li><li class="sidebar-sub-header"><a href="/views/professionalJs4th-doc/basic/chapter-3.html#_3-1-2-标识符" class="sidebar-link">3.1.2 标识符</a></li><li class="sidebar-sub-header"><a href="/views/professionalJs4th-doc/basic/chapter-3.html#_3-1-3-注释" class="sidebar-link">3.1.3 注释</a></li><li class="sidebar-sub-header"><a href="/views/professionalJs4th-doc/basic/chapter-3.html#_3-1-4-严格模式" class="sidebar-link">3.1.4 严格模式</a></li><li class="sidebar-sub-header"><a href="/views/professionalJs4th-doc/basic/chapter-3.html#_3-1-5-语句" class="sidebar-link">3.1.5 语句</a></li></ul></li><li class="sidebar-sub-header"><a href="/views/professionalJs4th-doc/basic/chapter-3.html#_3-2-关键字和保留字" class="sidebar-link">3.2 关键字和保留字</a></li><li class="sidebar-sub-header"><a href="/views/professionalJs4th-doc/basic/chapter-3.html#_3-3-变量" class="sidebar-link">3.3 变量</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/professionalJs4th-doc/basic/chapter-3.html#_3-3-1-var关键字" class="sidebar-link">3.3.1 var关键字</a></li><li class="sidebar-sub-header"><a href="/views/professionalJs4th-doc/basic/chapter-3.html#_3-3-2-let声明" class="sidebar-link">3.3.2 let声明</a></li><li class="sidebar-sub-header"><a href="/views/professionalJs4th-doc/basic/chapter-3.html#_3-3-3-const声明" class="sidebar-link">3.3.3 const声明</a></li><li class="sidebar-sub-header"><a href="/views/professionalJs4th-doc/basic/chapter-3.html#_3-3-4-声明风格及最佳实践" class="sidebar-link">3.3.4 声明风格及最佳实践</a></li></ul></li><li class="sidebar-sub-header"><a href="/views/professionalJs4th-doc/basic/chapter-3.html#_3-4-数据类型" class="sidebar-link">3.4 数据类型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/professionalJs4th-doc/basic/chapter-3.html#_3-4-1-typeof操作符" class="sidebar-link">3.4.1 typeof操作符</a></li><li class="sidebar-sub-header"><a href="/views/professionalJs4th-doc/basic/chapter-3.html#_3-4-2-undefined类型" class="sidebar-link">3.4.2 Undefined类型</a></li><li class="sidebar-sub-header"><a href="/views/professionalJs4th-doc/basic/chapter-3.html#_3-4-3-null类型" class="sidebar-link">3.4.3 Null类型</a></li><li class="sidebar-sub-header"><a href="/views/professionalJs4th-doc/basic/chapter-3.html#_3-4-4-boolean类型" class="sidebar-link">3.4.4 Boolean类型</a></li><li class="sidebar-sub-header"><a href="/views/professionalJs4th-doc/basic/chapter-3.html#_3-4-5-number类型" class="sidebar-link">3.4.5 Number类型</a></li><li class="sidebar-sub-header"><a href="/views/professionalJs4th-doc/basic/chapter-3.html#_3-4-6-string类型" class="sidebar-link">3.4.6 String类型</a></li><li class="sidebar-sub-header"><a href="/views/professionalJs4th-doc/basic/chapter-3.html#_3-4-7-symbol-类型" class="sidebar-link">3.4.7 Symbol 类型</a></li><li class="sidebar-sub-header"><a href="/views/professionalJs4th-doc/basic/chapter-3.html#_3-4-8-object-类型" class="sidebar-link">3.4.8 Object 类型</a></li></ul></li><li class="sidebar-sub-header"><a href="/views/professionalJs4th-doc/basic/chapter-3.html#_3-5-操作符" class="sidebar-link">3.5 操作符</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/professionalJs4th-doc/basic/chapter-3.html#_3-5-1-一元操作符" class="sidebar-link">3.5.1 一元操作符</a></li><li class="sidebar-sub-header"><a href="/views/professionalJs4th-doc/basic/chapter-3.html#_3-5-2-位操作符" class="sidebar-link">3.5.2 位操作符</a></li><li class="sidebar-sub-header"><a href="/views/professionalJs4th-doc/basic/chapter-3.html#_3-5-3-布尔操作符" class="sidebar-link">3.5.3 布尔操作符</a></li><li class="sidebar-sub-header"><a href="/views/professionalJs4th-doc/basic/chapter-3.html#_3-5-4-乘性操作符" class="sidebar-link">3.5.4 乘性操作符</a></li><li class="sidebar-sub-header"><a href="/views/professionalJs4th-doc/basic/chapter-3.html#_3-5-3-指数操作符" class="sidebar-link">3.5.3 指数操作符</a></li><li class="sidebar-sub-header"><a href="/views/professionalJs4th-doc/basic/chapter-3.html#_3-5-6-加性操作符" class="sidebar-link">3.5.6 加性操作符</a></li><li class="sidebar-sub-header"><a href="/views/professionalJs4th-doc/basic/chapter-3.html#_3-5-7-关系操作符" class="sidebar-link">3.5.7 关系操作符</a></li><li class="sidebar-sub-header"><a href="/views/professionalJs4th-doc/basic/chapter-3.html#_3-5-8-相等操作符" class="sidebar-link">3.5.8 相等操作符</a></li><li class="sidebar-sub-header"><a href="/views/professionalJs4th-doc/basic/chapter-3.html#_3-5-9-条件操作符" class="sidebar-link">3.5.9 条件操作符</a></li><li class="sidebar-sub-header"><a href="/views/professionalJs4th-doc/basic/chapter-3.html#_3-5-10-赋值操作符" class="sidebar-link">3.5.10 赋值操作符</a></li><li class="sidebar-sub-header"><a href="/views/professionalJs4th-doc/basic/chapter-3.html#_3-5-11-逗号操作符" class="sidebar-link">3.5.11 逗号操作符</a></li></ul></li><li class="sidebar-sub-header"><a href="/views/professionalJs4th-doc/basic/chapter-3.html#_3-6-语句" class="sidebar-link">3.6 语句</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/views/professionalJs4th-doc/basic/chapter-3.html#_3-6-1-if-语句" class="sidebar-link">3.6.1 if 语句</a></li><li class="sidebar-sub-header"><a href="/views/professionalJs4th-doc/basic/chapter-3.html#_3-6-2-do-while-语句" class="sidebar-link">3.6.2 do-while 语句</a></li><li class="sidebar-sub-header"><a href="/views/professionalJs4th-doc/basic/chapter-3.html#_3-6-3-while-语句" class="sidebar-link">3.6.3 while 语句</a></li><li class="sidebar-sub-header"><a href="/views/professionalJs4th-doc/basic/chapter-3.html#_3-6-4-for-语句" class="sidebar-link">3.6.4 for 语句</a></li><li class="sidebar-sub-header"><a href="/views/professionalJs4th-doc/basic/chapter-3.html#_3-6-5-for-in-语句" class="sidebar-link">3.6.5 for-in 语句</a></li><li class="sidebar-sub-header"><a href="/views/professionalJs4th-doc/basic/chapter-3.html#_3-6-6-for-of-语句" class="sidebar-link">3.6.6 for-of 语句</a></li><li class="sidebar-sub-header"><a href="/views/professionalJs4th-doc/basic/chapter-3.html#_3-6-7-标签语句" class="sidebar-link">3.6.7 标签语句</a></li><li class="sidebar-sub-header"><a href="/views/professionalJs4th-doc/basic/chapter-3.html#_3-6-8-break-和-continue语句" class="sidebar-link">3.6.8 break 和 continue语句</a></li><li class="sidebar-sub-header"><a href="/views/professionalJs4th-doc/basic/chapter-3.html#_3-6-9-with-语句" class="sidebar-link">3.6.9 with 语句</a></li><li class="sidebar-sub-header"><a href="/views/professionalJs4th-doc/basic/chapter-3.html#_3-6-10-switch-语句" class="sidebar-link">3.6.10 switch 语句</a></li></ul></li><li class="sidebar-sub-header"><a href="/views/professionalJs4th-doc/basic/chapter-3.html#_3-7-函数" class="sidebar-link">3.7 函数</a></li></ul></li><li><a href="/views/professionalJs4th-doc/basic/chapter-4.html" class="sidebar-link">第4章 变量、作用域与内存</a></li><li><a href="/views/professionalJs4th-doc/basic/chapter-5.html" class="sidebar-link">第5章 基本引用类型</a></li><li><a href="/views/professionalJs4th-doc/basic/chapter-6.html" class="sidebar-link">第6章 集合引用类型</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><a href="/views/professionalJs4th-doc/BOMAndDOM/" class="sidebar-heading clickable"><span>BOM和DOM</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/views/professionalJs4th-doc/BOMAndDOM/chapter-12.html" class="sidebar-link">第12章 BOM</a></li><li><a href="/views/professionalJs4th-doc/BOMAndDOM/chapter-13.html" class="sidebar-link">第13章 客户端检测</a></li><li><a href="/views/professionalJs4th-doc/BOMAndDOM/chapter-14.html" class="sidebar-link">第14章 DOM</a></li><li><a href="/views/professionalJs4th-doc/BOMAndDOM/chapter-15.html" class="sidebar-link">第15章 DOM扩展</a></li><li><a href="/views/professionalJs4th-doc/BOMAndDOM/chapter-16.html" class="sidebar-link">第16章 DOM2和DOM3</a></li><li><a href="/views/professionalJs4th-doc/BOMAndDOM/chapter-17.html" class="sidebar-link">第17章 事件</a></li><li><a href="/views/professionalJs4th-doc/BOMAndDOM/chapter-18.html" class="sidebar-link">第18章 动画与canvas图形</a></li><li><a href="/views/professionalJs4th-doc/BOMAndDOM/chapter-19.html" class="sidebar-link">第19章 表单脚本</a></li></ul></section></li><li><a href="/views/professionalJs4th-doc/advance/" class="sidebar-link">进阶内容</a></li><li><a href="/views/professionalJs4th-doc/API/" class="sidebar-link">JavaScriptAPI</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="第3章-语言基础"><a href="#第3章-语言基础" class="header-anchor">#</a> 第3章 语言基础</h1> <p><strong>本章内容</strong></p> <ul><li>语法</li> <li>数据类型</li> <li>流控制语句</li> <li>理解函数</li></ul> <h2 id="_3-1-语法"><a href="#_3-1-语法" class="header-anchor">#</a> 3.1 语法</h2> <h3 id="_3-1-1-区分大小写"><a href="#_3-1-1-区分大小写" class="header-anchor">#</a> 3.1.1 区分大小写</h3> <p>ECMAScript中的一切都区分大小写，包括变量、函数名、操作符等。</p> <h3 id="_3-1-2-标识符"><a href="#_3-1-2-标识符" class="header-anchor">#</a> 3.1.2 标识符</h3> <div class="language- extra-class"><pre><code>标识符就是变量、函数、属性或者函数参数的名称。
</code></pre></div><ul><li>标识符第一个字符必须是字母、下划线或者$。</li> <li>剩下的字符可以是字母、下划线、$或者数字。</li> <li>ECMAScript标识符使用驼峰大小写形式，这种写法并非强制，但是它与ECMAScript内置函数和对象的命名一致，所以算是最佳实践。</li></ul> <h3 id="_3-1-3-注释"><a href="#_3-1-3-注释" class="header-anchor">#</a> 3.1.3 注释</h3> <p>ECMASCript采用C语言风格的注释，分为单行和多行注释。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 单行注释</span>
<span class="token comment">/*
多行注释
*/</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_3-1-4-严格模式"><a href="#_3-1-4-严格模式" class="header-anchor">#</a> 3.1.4 严格模式</h3> <p>ECMASCript5增加了严格模式，一些不规范写法在这种模式下会被处理。例如：</p> <ul><li>不能使用<code>with</code>语句</li> <li>不使用声明关键字声明变量，会报错</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 对整个脚本启用严格模式，在脚本开头加</span>
<span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// 在指定函数内启用严格模式，在函数体开头加</span>
<span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_3-1-5-语句"><a href="#_3-1-5-语句" class="header-anchor">#</a> 3.1.5 语句</h3> <ul><li>ECMAScript中的语句以分号结尾，省略分号则由解析器确定语句在哪里结尾，加分号可以提高性能。</li> <li>多条语句可以合并到一个C语言风格的代码块内，代码块由 { 标识开始，由 } 标识结束。</li> <li>if之类的控制语句要求在执行多条语句时必须有代码块，但最佳实践是始终在控制语句中使用代码块，可以让内容更清晰，减少出错。</li></ul> <h2 id="_3-2-关键字和保留字"><a href="#_3-2-关键字和保留字" class="header-anchor">#</a> 3.2 关键字和保留字</h2> <p>关键字和保留字不能作为标识符或属性名。</p> <h2 id="_3-3-变量"><a href="#_3-3-变量" class="header-anchor">#</a> 3.3 变量</h2> <div class="language- extra-class"><pre><code>ECMAScript中的变量是松散型的，可以用于保存任何类型的数据。
</code></pre></div><h3 id="_3-3-1-var关键字"><a href="#_3-3-1-var关键字" class="header-anchor">#</a> 3.3.1 var关键字</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token comment">// 要定义变量，可以使用var操作符，后跟变量名：</span>
        <span class="token keyword">var</span> message<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>以上代码定义了一个名为message的变量，在不初始化的情况下，变量会保存一个特殊值undefined。另外，不推荐改变变量保存值的类型。</p> <ul><li><p>var声明作用域</p> <ul><li>使用var操作符定义的变量会成为包含它的函数的局部变量，该变量会在函数退出时被销毁。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> test（）<span class="token punctuation">{</span>
    <span class="token keyword">var</span> message <span class="token operator">=</span> <span class="token string">'123'</span><span class="token punctuation">;</span> <span class="token comment">// 局部变量。</span>
<span class="token punctuation">}</span>
<span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 会报错。</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>这里，message变量是在test函数内部使用var定义的，调用它会创建变量并赋值，调用之后变量随即被销毁，所以最后一行代码会出错。不过，在函数内部定义变量时省略var操作符，可以创建一个全局变量：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    message <span class="token operator">=</span> <span class="token string">'hi'</span><span class="token punctuation">;</span> <span class="token comment">// 全局变量</span>
<span class="token punctuation">}</span>
<span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;hi&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">注意</p> <p>虽然可以通过省略var操作符定义全局变量，但是不推荐这么做，首先是难以维护，其次在严格模式下，给未声明的变量赋值，会导致抛出ReferenceError（引用错误）。</p> <div class="custom-block tip"><p class="custom-block-title">ReferenceError和TypeError的区别</p> <p>ReferenceError是引用错误，是在作用域内查找变量失败导致。
TypeError是找到了变量，但是对其进行了非法操作导致。</p></div></div> <ul><li>如果需要定义多个变量，可在一条语句中用逗号分隔</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span>
b<span class="token punctuation">,</span>
c<span class="token operator">=</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p>var变量提升</p></li></ul> <p>使用var关键字声明的变量会自动提升至函数作用域顶部。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>之所以不会报错，是因为ECMAScript运行时把它看成等价于如下代码：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> a<span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
    a<span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>此外，反复多次使用var声明同一个变量也没问题（最后一个有效），由于变量声明会被提升，js引擎会自动将多余的声明在作用域顶部合并为一个声明。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>funcition <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_3-3-2-let声明"><a href="#_3-3-2-let声明" class="header-anchor">#</a> 3.3.2 let声明</h3> <div class="custom-block tip"><p class="custom-block-title">let声明与var声明的区别</p> <p>1、let声明的范围是块作用域，var声明的范围的函数作用域（块作用域是函数作用域的子集，所以适用于var的作用域限制也适用于let）。</p> <p>2、let不允许同一个块作用域内出现冗余声明（嵌套使用相同的标识符不会出错，因为没有在同一个块内重复声明）。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 重复声明</span>
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// SyntaxError 语法错误</span>
<span class="token comment">// 嵌套声明</span>
<span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token string">'hello'</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token string">'world'</span><span class="token punctuation">;</span> <span class="token comment">// 'world'</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'hello'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>3、let声明的变量不会在作用域中被提升。</p> <p>4、let在全局作用域中声明的变量不会成为window对象的属性。</p> <p>5、使用let声明迭代变量时，js引擎会在后台为每个迭代循环声明一个新的迭代变量。</p></div> <ul><li><p>暂时性死区</p> <p>let声明的变量不会被提升到作用域的顶部。在let声明之前的执行瞬间被称为“暂时性死区”（temporal dead zone），在此阶段引用任何后面才声明的变量都会抛出ReferenceError。</p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// name 会被提升</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>
<span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// age不会被提升</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ReferenceError , age is not defined.</span>
<span class="token keyword">let</span> age <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li><p>全局声明</p> <p>使用let在全局作用域中声明的变量不会成为window对象的属性（var声明的变量会）。</p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">&quot;ls&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'ls'</span>

<span class="token keyword">let</span> age <span class="token operator">=</span> <span class="token number">12</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li><p>for 循环中的let 声明</p> <p>在let声明出现之前，用var声明的迭代变量会渗透到循环体外部：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">5</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 5</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>改成使用let之后，这个问题就消失了，因为let声明的迭代变量的作用域仅限于for循环块内部：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">5</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ReferenceError, i is not defined.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>在使用var时，最常见的问题就是对迭代变量的奇特声明和修改：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">5</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 你以为可能会输出0、1、2、3、4</span>
<span class="token comment">// 实际会输出5、5、5、5、5</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>这是因为在退出循环时，迭代变量保存的是导致循环退出的值：5。在之后执行超时逻辑时，所有的i都是同一个变量，因为输出都是同一个最终值。</p> <p>而在使用let声明迭代变量时，js引擎会在后台为每一个迭代循环声明一个新的迭代变量，每个setTimeout引用的是不同的变量实例，输出的就是循环执行过程中每个迭代变量的值：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">5</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 输出0、1、2、3、4</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>这种每次迭代声明一个独立变量的实例的行为适用于所有风格的for循环，包括for-in和for-of循环。</p></li></ul> <h3 id="_3-3-3-const声明"><a href="#_3-3-3-const声明" class="header-anchor">#</a> 3.3.3 const声明</h3> <ul><li>const声明与let声明的区别
<ul><li>const声明变量时必须同时初始化变量。</li> <li>const声明的变量不可修改。</li> <li>不能用const声明迭代变量（会自增）；</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 给常量赋值</span>
<span class="token keyword">const</span> num <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
num <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// TypeError: assignment to constant variable.</span>

<span class="token comment">// 声明迭代变量</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">const</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">5</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// TypeError: assignment to constant avriable.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>不过，如果想用const声明一个不会被修改的for循环变量，也可以，也就是说每次迭代只是创建一个新变量。这对for-in和for-of循环特别有意义：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">const</span> j <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 7、7、7、7、7</span>
<span class="token punctuation">}</span>

<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> <span class="token punctuation">{</span>a<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> b<span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// a, b</span>
<span class="token punctuation">}</span>

<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">const</span> val <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1, 2, 3, 4, 5</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><ul><li>const声明的限制只适用于它指向的变量的引用，也就是当const声明的变量引用的是一个对象，那么修改这个对象内部的属性并不违反const的限制。</li></ul> <h3 id="_3-3-4-声明风格及最佳实践"><a href="#_3-3-4-声明风格及最佳实践" class="header-anchor">#</a> 3.3.4 声明风格及最佳实践</h3> <ul><li>不使用var</li> <li>const优先，let次之</li></ul> <h2 id="_3-4-数据类型"><a href="#_3-4-数据类型" class="header-anchor">#</a> 3.4 数据类型</h2> <div class="language- extra-class"><pre><code>ECMAScript有6种简单数据类型（也称为原始类型）：Undefined, Null, Boolean, String, Number, Symbol(符号)。还有一种复杂数据类型叫Object。Object是一种无序键值对的集合。
</code></pre></div><h3 id="_3-4-1-typeof操作符"><a href="#_3-4-1-typeof操作符" class="header-anchor">#</a> 3.4.1 typeof操作符</h3> <div class="language- extra-class"><pre><code>因为ECMAScript的类型系统是松散的，所以需要一种手段来确定变量的数据类型，所以就有了typeof操作符，对任意变量使用typeof操作符会返回下列字符串之一：
</code></pre></div><ul><li>&quot;undefined&quot; 表示值未定义；</li> <li>&quot;boolean&quot; 表示值为布尔值；</li> <li>&quot;string&quot; 表示值为字符串；</li> <li>&quot;number&quot; 表示值为数值；</li> <li>&quot;object&quot; 表示值对象或者null（而不是function）；</li> <li>&quot;function&quot; 表示值为函数；</li> <li>&quot;symbol&quot; 表示值为符号。</li></ul> <div class="custom-block tip"><p class="custom-block-title">注意</p> <p>1、typeof null 返回的是&quot;object&quot;，这是因为特殊值null被认为是一个空对象的引用。</p> <p>2、严格说，函数在ECMAScript中被认为是对象，它并不代表一种数据类型。但是函数也有自己特殊的属性，为此，有必要通过typeof操作符区分函数和其他对象。</p></div> <h3 id="_3-4-2-undefined类型"><a href="#_3-4-2-undefined类型" class="header-anchor">#</a> 3.4.2 Undefined类型</h3> <ul><li>Undefined类型只有一个值，就是特殊值undefined,它是一个假值。</li> <li>增加这个特殊值就是为了明确空对象指针（null）和未初始化变量的区别。</li> <li>对于未声明的变量和包含undefined值的变量，typeof都返回字符串&quot;undefined&quot;。</li> <li>包含undefined值的变量跟未定义变量是有区别的：</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> message<span class="token punctuation">;</span> <span class="token comment">// 这个变量被声明了，只是值为undefined</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ReferenceError: age is not defined. </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_3-4-3-null类型"><a href="#_3-4-3-null类型" class="header-anchor">#</a> 3.4.3 Null类型</h3> <ul><li>Null类型同样只有一个值,即特殊值null,它是一个假值,null值表示一个空对象指针。</li> <li>在定义将来要保存对象值的变量时，可以把它初始化为null，这样只要检查这个变量的值是不是null，就可以知道这个变量在后来是否被赋予了其他对象的引用。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">if</span><span class="token punctuation">(</span>car <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// car是一个对象的引用</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>undefined是由null派生来的，null 和 undefined表面相等：</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_3-4-4-boolean类型"><a href="#_3-4-4-boolean类型" class="header-anchor">#</a> 3.4.4 Boolean类型</h3> <ul><li>Boolead有两个字面值：true和false。但其他所有ECMAScript类型的值都有相应布尔值的等价形式。</li> <li>将其他类型的值转换为布尔值，可以调用Boolean()转型函数。</li></ul> <p>下表总结了不同类型值与布尔值之间的转换规则：</p> <img src="/images/Boolean.png"> <h3 id="_3-4-5-number类型"><a href="#_3-4-5-number类型" class="header-anchor">#</a> 3.4.5 Number类型</h3> <p><strong>Number类型使用IEEE 754格式表示整数和浮点数（某些语言中也叫双精度值）。</strong></p> <ul><li><p>整数</p> <ul><li>十进制整数</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token comment">// 直接写出来即可</span>
    <span class="token keyword">const</span> num <span class="token operator">=</span> <span class="token number">55</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>八进制整数（严格模式下无效）。八进制字面量，第一个数字必须是零（0），然后是相应的八进制数字（数值0~7）。如果字面量中包含的数字超出了应有的范围，就会忽略前缀零，后面的数字会被当做十进制数。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> num1 <span class="token operator">=</span> <span class="token number">07</span><span class="token punctuation">;</span> <span class="token comment">// 无效的八进制，被当成7处理。</span>
<span class="token keyword">const</span> num2 <span class="token operator">=</span> <span class="token number">070</span><span class="token punctuation">;</span> <span class="token comment">// 7*8+0=56。</span>
<span class="token keyword">const</span> num3 <span class="token operator">=</span> <span class="token number">078</span><span class="token punctuation">;</span> <span class="token comment">// 无效的八进制，被当成78处理。</span>
<span class="token keyword">const</span> num4 <span class="token operator">=</span> <span class="token number">027</span><span class="token punctuation">;</span> <span class="token comment">// 2*8+7 = 23。</span>
<span class="token keyword">const</span> num5 <span class="token operator">=</span> <span class="token number">007</span><span class="token punctuation">;</span> <span class="token comment">// 0*8+7 = 7。</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>十六进制整数。前缀是0x，然后是十六进制数字（0-9以及A-F）</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 计算方法：第一位（从右向左）乘以16的0次方 加上 第二位乘以16的1次方……</span>
<span class="token comment">// tip: 任何非零数的0次幂都等于 1</span>
<span class="token keyword">const</span> num1 <span class="token operator">=</span> <span class="token number">0xA</span><span class="token punctuation">;</span> <span class="token comment">// 10*16^0 = 10。</span>
<span class="token keyword">const</span> num2 <span class="token operator">=</span> <span class="token number">0x1F</span><span class="token punctuation">;</span> <span class="token comment">// 15*16^0 + 1*16^1 = 31;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p>浮点值</p> <ul><li>要定义浮点值，数值中必须包含小数点，且小数点后至少有一个非零数字。</li> <li>因为存储浮点值的内存空间的存储整数值的2倍，所以ECMAScript总会设法把值转换为整数。（如小数点后没有数字或者数字本身就是整数时（1.0），就会被转换为整数）。</li></ul> <div class="custom-block tip"><p class="custom-block-title">科学计数法</p> <div class="language- extra-class"><pre><code>  ECMAScript中科学计数法的格式要求是一个数值（整数或者浮点数）后跟一个字母e（大写或小写），再跟一个要乘的10的多少次幂（例如const num = 31.25E6; // 等于31250000）。
  
  默认情况下，ECMAScript会将小数点后至少包含6个零的浮点数转换为科学计数法表示（例如0.0000003会被转换为3e-7）。
</code></pre></div></div> <ul><li>浮点值的精确度最高达17位，但是远不如整数精确。因此永远不要测试某个特定的浮点值（例如0.2+0.1=0.30000000000000004，而不是0.3）。</li></ul> <div class="custom-block tip"><p class="custom-block-title">IEEE 754</p> <div class="language- extra-class"><pre><code>  这是因为使用了IEEE 754数值格式，不仅ECMAScript，其他使用此格式的语言也有这个问题。
</code></pre></div></div></li> <li><p>值的范围</p> <p><strong>由于内存限制，ECMAScript能表示的数值是有范围的：</strong></p> <ul><li>最大：<code>Number.MAX_VALUE</code>，具体值通常为5e-324。</li> <li>最小：<code>Number.MIN_VALUE</code>，具体值通常为1.797 693 134 862 315 7e+308。</li></ul> <p><strong>如果计算得到的某个值超出了js能够表示的范围，就会被自动转换为Infinity（无穷）值：</strong></p> <ul><li>正无穷大：<code>Infinity</code>。</li> <li>负无穷大：<code>-Infinity</code>。</li></ul> <p><strong>想要确定一个值能否被js正确表示，使用<code>isFinite(arg)</code>函数，函数返回布尔值。</strong></p> <div class="custom-block tip"><p class="custom-block-title">获取正负Infinity</p> <div class="language- extra-class"><pre><code>  Number.NEGATIVE_INFINITY  -- 获取-Infinity。
  Number.POSITIVE_INFINITY  -- 获取Infinity。
</code></pre></div></div></li> <li><p>NaN</p> <p><strong>NaN意思是”不是数值“（Not a Number），从来表示本来要返回数值的操作失败了。</strong></p> <ul><li>在ECMAScript中，0、+0、-0互相相除会返回<code>NaN</code>：</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">0</span> <span class="token operator">/</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// NaN</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">0</span> <span class="token operator">/</span> <span class="token operator">+</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// NaN</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>分子是非零值，分母是有符号零或无符号零，会返回无穷值：</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token operator">/</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Infinity</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">5</span><span class="token operator">/</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// -Infinity</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token operator">/</span><span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// -Infinity</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>任何涉及NaN的操作始终会返回NaN（例如10/NaN）。</li> <li>NaN不等于包含NaN在内的任何值。</li> <li><code>isNaN(arg)</code>函数，函数会尝试将参数转换为数值，转换失败会返回<code>false</code>。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">isNaN</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true </span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">isNaN</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">isNaN</span><span class="token punctuation">(</span><span class="token string">'10'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false 转换为10</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">isNaN</span><span class="token punctuation">(</span><span class="token string">'blue'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">isNaN</span><span class="token punctuation">(</span><span class="token string">'false'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// fasle 转换为0</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">isNaN</span><span class="token punctuation">(</span><span class="token string">'true'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false 转换为1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li><p>数值转换</p> <p><strong>有三个函数可以将非数值转换为数值：Number()是转型函数，适用于任何数据类型。parseInt()和parseFloat()主要用于将字符串转为数值。</strong></p> <ul><li><code>Number()</code>函数转换规则
<ul><li>布尔值。<code>true</code>转换为1，<code>false</code>为0。</li> <li>数值。直接返回。</li> <li><code>null</code>。返回0。</li> <li><code>undefined</code>。返回<code>NaN</code>。</li> <li>字符串。应用以下规则：
<ul><li>字符串中包含数值字符，包括数值字符前带加减号的情况，转换为十进制数值（<code>Number('01')-&gt;1; Number('-0.3')-&gt;-0.3;</code>）。</li> <li>字符串包含有效的浮点数格式，返回浮点数（<code>Number('01.1')-&gt;0.1;</code>）。</li> <li>字符串包含有效的十六进制格式如&quot;0xf&quot;，返回对应的十进制整数值。</li> <li>空字符串返回0。</li> <li>字符串包含上述情况外的其他字符，返回NaN。</li></ul></li> <li>对象，先调用<code>valueOf()</code>方法返回原始值，并按照上述规则转换返回的值，如果转换结果为NaN，再调用toString()方法，再按照字符串的规则转换。</li></ul></li> <li><code>parseInt()</code>函数</li></ul> <p>在需要得到整数时优先考虑<code>parseInt()</code>函数，<code>parseInt()</code>函数从字符串的第一个非空格字符开始转换，如果第一个字符不是数值、加减号，<code>parseInt()</code>立即返回<code>NaN</code>，空字符串也是如此。如果第一个字符通过，则继续检测到字符串末尾或碰到非数值字符。<code>parseInt()</code>也能识别八进制和十六进制。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'1234blue'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1234</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'22.5'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 22 </span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// NaN</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'0xf'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 15</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><code>parseInt()</code>函数接收第二个参数，指定进制数，如果提供了进制数，那么字符串前的<code>&quot;0x&quot;</code>可以省略。建议始终提供第二个参数。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">'AF'</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 175</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">'AF'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// NaN</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li><code>parseFloat()</code>函数
<ul><li>与<code>parseInt()</code>函数类似，<code>parseFloat()</code>是检测到字符串末尾，或无效的浮点字符为止。</li> <li><code>parseFloat()</code>只解析十进制数值，不能指定进制数，它始终忽略字符串开头的0，因此16进制数始终返回0。</li> <li>如果字符串表示整数，那么<code>parseFloat()</code>函数返回整数：</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">parseFloat</span><span class="token punctuation">(</span><span class="token string">'234bule'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 234 </span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">parseFloat</span><span class="token punctuation">(</span><span class="token string">'0xa'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0 </span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">parseFloat</span><span class="token punctuation">(</span><span class="token string">'22.5.7'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 22.5 </span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">parseFloat</span><span class="token punctuation">(</span><span class="token string">'0908.5'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 908.5 </span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">parseFloat</span><span class="token punctuation">(</span><span class="token string">'3.125e7'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  31250000</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ul> <h3 id="_3-4-6-string类型"><a href="#_3-4-6-string类型" class="header-anchor">#</a> 3.4.6 String类型</h3> <div class="language- extra-class"><pre><code>String（字符串）数据类型表示零或多个16位Unicode字符序列。可以用双引号、单引号或者反引号标示。
</code></pre></div><h4 id="_1-字符字面量"><a href="#_1-字符字面量" class="header-anchor">#</a> 1.字符字面量</h4> <p>字符串数据类型包含一些字符字面量，用于表示非打印字符（不能显示或打印出来的字符，如回车符）或有其他用途的字符，如下表所示：</p> <table><thead><tr><th style="text-align:center;">字面量</th> <th style="text-align:center;">含义</th></tr></thead> <tbody><tr><td style="text-align:center;">\n</td> <td style="text-align:center;">换行</td></tr> <tr><td style="text-align:center;">\t</td> <td style="text-align:center;">制表</td></tr> <tr><td style="text-align:center;">\b</td> <td style="text-align:center;">退格</td></tr> <tr><td style="text-align:center;">\r</td> <td style="text-align:center;">回车</td></tr> <tr><td style="text-align:center;">\f</td> <td style="text-align:center;">换页</td></tr> <tr><td style="text-align:center;">\ \</td> <td style="text-align:center;">反斜杠（\）</td></tr> <tr><td style="text-align:center;">\ '</td> <td style="text-align:center;">单引号，例如'Hey, \ 'ls.\ ' '</td></tr> <tr><td style="text-align:center;">\ &quot;</td> <td style="text-align:center;">双引号</td></tr> <tr><td style="text-align:center;">\ `</td> <td style="text-align:center;">反引号</td></tr> <tr><td style="text-align:center;">\xnn</td> <td style="text-align:center;">以十六进制编码表示的字符（n是十六进制0~F），例如\x41等于&quot;A&quot;</td></tr> <tr><td style="text-align:center;">\unnnn</td> <td style="text-align:center;">以十六进制编码nnnn表示的Unicode字符（n是十六进制0~F），例如\u03a3等于希腊字符 &quot;Σ&quot;</td></tr></tbody></table> <div class="custom-block tip"><p class="custom-block-title">字符字面量的长度</p> <p>因为字符字面量（转义序列）表示一个字符，所以只算一个字符，在计算字符串长度时按1计算。</p></div> <h4 id="_2-字符串的特点"><a href="#_2-字符串的特点" class="header-anchor">#</a> 2.字符串的特点</h4> <p>ECMAScript中的字符串是不可变的（immutable），一旦创建，值不可变。如果想修改一个变量中的字符串值，必须先销毁原始字符串，再将包含新值的字符串保存到该变量。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">let</span> lang <span class="token operator">=</span> <span class="token string">&quot;Jave&quot;</span><span class="token punctuation">;</span>
    lang <span class="token operator">=</span> lang <span class="token operator">+</span> <span class="token string">&quot;Script&quot;</span><span class="token punctuation">;</span>
    <span class="token comment">// lang从字符串&quot;Java&quot;被重新定义为&quot;JavaScript&quot;。整个过程会先分支一个足够容纳10个字符的空间，然后填充上&quot;Java&quot;和&quot;Script&quot;，最后销毁原始字符串&quot;Java&quot;和&quot;Script&quot;，因为这两个字符串都没用了。</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="_3-转换为字符串"><a href="#_3-转换为字符串" class="header-anchor">#</a> 3.转换为字符串</h4> <ul><li><p><code>toString()</code>方法</p> <ul><li><code>toString()</code>方法可用于数值、布尔值、对象和字符串值。null和undefined没有<code>toString()</code>方法。</li> <li>在对数值调用<code>toString()</code>方法时可以接收一个进制数参数，默认为10。</li></ul></li> <li><p><code>String()</code>转型函数</p> <p>在不确定一个值是否是<code>null</code>或<code>undefined</code>时，可以用String()转型函数，其规则如下：</p> <ul><li>如果值有toString()方法，则调用并返回。</li> <li>值是null返回&quot;null&quot;，值是undefined返回&quot;undefined&quot;。</li></ul></li></ul> <h4 id="_4-模板字面量"><a href="#_4-模板字面量" class="header-anchor">#</a> 4.模板字面量</h4> <ul><li>ES6 新增了使用模板字面量定义字符串的能力，与单双引号不同的地方是模板字面量<strong>保留换行符</strong>，可以跨行定义字符串。</li> <li>模板字面量<strong>不是字符串</strong>，是一种JavaScript表达式，只不过求值后得到的是字符串。</li> <li>模板字面量会保留反引号内的空格，空格计算长度。</li> <li>模板字面量最常用的特性是<strong>字符串插值</strong>。所有插入的值都会使用String()转型函数强制转换为字符串。</li> <li>嵌套的模板字符串<strong>无须转义</strong>。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">'ls'</span><span class="token punctuation">;</span>
    <span class="token comment">// 以前的字符串插值</span>
    <span class="token keyword">const</span> sentence <span class="token operator">=</span> <span class="token string">&quot;My name is&quot;</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">&quot;.&quot;</span><span class="token punctuation">;</span>
    <span class="token comment">// 模板字面量实现字符串插值</span>
    <span class="token keyword">const</span> sentence2 <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">My name is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="_5-模板字面量标签函数"><a href="#_5-模板字面量标签函数" class="header-anchor">#</a> 5.模板字面量标签函数</h4> <p>模板字面量也支持定义标签函数（tag function），通过标签函数可以<strong>自定义插值行为</strong>。标签函数<strong>接收</strong>被插值记号（${}）分隔后的模板和对每个表达式求值的结果。<strong>返回值</strong>是对模板字面量求值的结果。例：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">function</span> <span class="token function">sampleTag</span><span class="token punctuation">(</span><span class="token parameter">temp<span class="token punctuation">,</span> <span class="token operator">...</span>arg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>temp<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [&quot;My name is &quot;, &quot;.&quot;]</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">const</span> val <span class="token keyword">of</span> arg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'ls'</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> temp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> arg<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> item<span class="token operator">+</span>temp<span class="token punctuation">[</span>index<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">'ls'</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> sentence <span class="token operator">=</span> sampleTag<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">My name is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sentence<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'My name is ls.'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="_6-原始字符串"><a href="#_6-原始字符串" class="header-anchor">#</a> 6.原始字符串</h4> <p>使用模板字符串也可以直接获取原始的模板字面量内容，而不是被转换后的字符。两种方法：</p> <ul><li>使用默认的<code>String.raw</code>标签函数</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token comment">// Unicode示例</span>
    <span class="token comment">// \u00A9是版权符号</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">\u00A9</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// ©</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>String<span class="token punctuation">.</span>raw<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">\u00A9</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// \u00A9</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>通过标签函数的第一个参数（即字符串数组）的.raw属性取得每个字符串的原始内容：</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">printRaw</span><span class="token punctuation">(</span><span class="token parameter">temp</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>temp<span class="token punctuation">,</span> temp<span class="token punctuation">.</span>raw<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// [&quot;©&quot;,&quot;↵&quot;]， [&quot;\u00A9&quot;, &quot;\n&quot;]</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">const</span> val <span class="token keyword">of</span> temp<span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token comment">//       // &quot;©&quot;,&quot;↵&quot;(换行符)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">const</span> val <span class="token keyword">of</span> temp<span class="token punctuation">.</span>raw<span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// &quot;\u00A9&quot;, &quot;\n&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
printRaw<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">\u00A9</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token string">'and'</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">\n</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="_3-4-7-symbol-类型"><a href="#_3-4-7-symbol-类型" class="header-anchor">#</a> 3.4.7 Symbol 类型</h3> <p>符号是<strong>原始值</strong>，符号实例是<strong>唯一且不可变</strong>的，它的<strong>作用是</strong>通过创建唯一记号，进而用做非字符串形式的对象属性，来确保对象属性使用唯一标识符，防止出现属性冲突。</p> <h4 id="_1-符号的基本用法"><a href="#_1-符号的基本用法" class="header-anchor">#</a> 1. 符号的基本用法</h4> <ul><li>符号需要使用<code>Symbol()</code>函数初始化，<code>typeof</code>操作符对其返回<code>&quot;symbol&quot;</code>。</li> <li>调用<code>Symbol()</code>函数时，可以传入一个字符串参数作为符号的描述，这个参数可用来调试代码。</li> <li>符号没有字面量语法。</li> <li><code>Symbol()</code>函数不能与<code>new</code>关键字一起作为构造函数使用，这是为了避免创建符号包装对象。如确实想用符号包装对象，可以借用<code>Object()</code>函数：</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> mySymbol <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// TypeError: Symbol is not a constructor</span>
<span class="token comment">// 借用Object()函数</span>
<span class="token keyword">const</span> mySymbol <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> myWrappedSymbol <span class="token operator">=</span> <span class="token function">Object</span><span class="token punctuation">(</span>mySumbol<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> myWrappedSymbol<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'object'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">理解：字面量语法</p> <p>字面量就是指这个量本身，也即描述自己的量，一眼就能看到值的量。比如字面量3，字面量&quot;ABC&quot;。</p> <p>字面量对应的是变量，比如string x，我们不能确定它的值。</p></div> <div class="custom-block tip"><p class="custom-block-title">理解：JavaScript 包装对象</p> <p><strong>定义</strong></p> <p>对象是JavaScript语言最主要的数据类型，三种原始类型的值--数值、字符串、布尔值在一定条件下，也能转换为对象，也就是原始类型值的&quot;包装对象&quot;(<code>wrapper</code>)。</p> <p>所谓包装对象，指的是数值、字符串、布尔值分别对应的<code>Number</code>、<code>String</code>、<code>Boolean</code>三个原生对象，这三个对象可以把原始值&quot;包装&quot;成对象。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> v1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Number</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> v2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> v3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Boolean</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">typeof</span> v1<span class="token punctuation">;</span> <span class="token comment">// 'object'</span>
<span class="token keyword">typeof</span> v2<span class="token punctuation">;</span> <span class="token comment">// 'object'</span>
<span class="token keyword">typeof</span> v3<span class="token punctuation">;</span> <span class="token comment">// 'object'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>包装对象的设计目的有两个：</p> <ul><li>使得“对象”这种类型可以覆盖JavaScript所有的值，整门语言有一个通用的数据模型。</li> <li>使得原始类型的值也有办法调用自己的方法。</li></ul> <p>总结一下，<code>Number</code>、<code>String</code>、<code>Boolean</code>三个原生对象作为构造函数使用时可以将原始类型值转换为对象；作为普通函数时，可以将任意类型值转换为原始类型。</p> <p><strong>实例方法</strong></p> <p>三种包装对象各自提供了许多实例方法。这里介绍两种它们共有的、从<code>Object</code>对象继承的方法：<code>valueOf()</code>和<code>toString()</code>。</p> <p>valueOf()</p> <p><code>valueOf()</code>方法返回包装对象实例对应的原始类型的值。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">'xxx'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 'xxx'</span>
<span class="token keyword">new</span> <span class="token class-name">Number</span><span class="token punctuation">(</span><span class="token number">12345</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 12345</span>
<span class="token keyword">new</span> <span class="token class-name">Boolean</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>toString()</code>方法返回包装对象实例对应的原始类型的值的字符串形式。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">'xxx'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 'xxx'</span>
<span class="token keyword">new</span> <span class="token class-name">Number</span><span class="token punctuation">(</span><span class="token number">12345</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// '12345'</span>
<span class="token keyword">new</span> <span class="token class-name">Boolean</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'false'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>原始类型与实例对象的自动转换</strong></p> <p>原始类型的值有时会当做包装对象调用，即调用包装对象的属性和方法。这时，JavaScript引擎会自动将原始类型值砖混为包装对象实例，并在使用后立刻销毁该实例。比如字符串可以调用length属性返回其长度：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">'abc'</span>
str<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token comment">// 3</span>
<span class="token comment">// 等同于</span>
<span class="token keyword">const</span> strObj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/* 
String {
    0: 'a',
    1: 'b',
    2: 'c',
    length: 3.
    [[PrimitiveValue]]: &quot;acb&quot;   // 原始值
}
*/</span>
strObj<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token comment">// 3</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>上面代码中，<code>abc</code>是一个字符串，本身不是对象，不能调用<code>length</code>属性。JavaScript引擎自动把它转成包装对象，在这个对象上调用<code>length</code>属性。调用结束后，销毁此临时对象,下次再调用字符串的属性时，实际上是调用一个新生成的对象，而不是上次调用时生成的对象。这就是原始类型与实例对象的自动转换。</p> <p>自动转换生成的包装对象是只读的，无法修改，也就无法为其添加新属性，要为字符串添加属性，只有在它的原型对象<code>String.prototype</code>上定义：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 定义一个double方法，使得字符串和数字翻倍</span>
<span class="token comment">// 注意操作原型不能使用箭头函数，因为箭头函数没有自己的this，在箭头函数中调用this，this指向箭头函数定义位置中的this</span>
<span class="token class-name">String</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">double</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 使用原始值</span>
<span class="token punctuation">}</span>

<span class="token string">'abc'</span><span class="token punctuation">.</span><span class="token function">double</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'abcabc'</span>

<span class="token class-name">Number</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">double</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 使用原始值</span>
<span class="token punctuation">}</span>

<span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">double</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 246。注意这里数值直接调用方法时要加小括号，否则点运算符(.)会被解释为小数点。</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div></div> <h4 id="_2-使用全局符号注册表"><a href="#_2-使用全局符号注册表" class="header-anchor">#</a> 2. 使用全局符号注册表</h4> <p>如果运行时的不同部分需要<strong>共享和重用</strong>符号实例，可以用一个<strong>字符串作为键</strong>，在全局符号注册表中创建并重用符号，该键会被用作<strong>符号描述</strong>。</p> <ul><li>需要使用<code>Symbol.for()</code>方法。</li> <li>使用某个字符串调用时，会检查全局运行时注册表，如果不存在对应符号，就会生成一个新符号实例并添加到注册表中，如果存在与该字符串对应的符号，就返回该符号实例。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> v1 <span class="token operator">=</span> Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 创建新符号</span>
<span class="token keyword">const</span> v2 <span class="token operator">=</span> Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 重用已有符号</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>即便采用相同的符号描述，在全局注册表中定义的符号与使用<code>Symbol()</code>定义的符号也不等同：</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'aa'</span><span class="token punctuation">)</span> <span class="token operator">===</span> Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">'aa'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>可以使用<code>Symbol.keyFor()</code>来查询全局注册表，该方法接收符号，返回全局符号对应的字符串键（符号描述）：</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 创建全局符号</span>
<span class="token keyword">const</span> v1 <span class="token operator">=</span> Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">'aa'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Symmbol<span class="token punctuation">.</span><span class="token function">keyFor</span><span class="token punctuation">(</span>v1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'aa';</span>

<span class="token comment">// 创建普通符号，使用Symbol.keyFor()查询普通符号会返回undefined</span>
<span class="token keyword">const</span> v2 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'bb'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Symbol<span class="token punctuation">.</span><span class="token function">keyFor</span><span class="token punctuation">(</span>v2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// undefined</span>

<span class="token comment">// 如果传给Symbol.keyFor()的不是符号，会报错</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Symbol<span class="token punctuation">.</span><span class="token function">keyFor</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// TypeError: 123 is not a symbol</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="_3-使用符号作为属性"><a href="#_3-使用符号作为属性" class="header-anchor">#</a> 3. 使用符号作为属性</h4> <ul><li>可以使用字符串或者数值作为属性的地方都可以用符号，包括对象字面量属性和<code>Object.defineProperty()</code>/<code>Object.defineProperties()</code>定义的属性。对象字面量只能在计算属性语法（ES6）中使用符号作为属性：</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> s1 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'aa'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
s2 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'bb'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
s3 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'cc'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
s4 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'dd'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>s1<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token number">123</span><span class="token punctuation">,</span>
    x<span class="token operator">:</span><span class="token number">123456</span>
<span class="token punctuation">}</span>
<span class="token comment">// 或者 obj[s1] = 123</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { Symbol(aa): 123 }</span>

Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span> obj <span class="token punctuation">,</span> s2<span class="token punctuation">,</span> <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token string">'2222'</span> <span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { Symbol(aa): 123, Symbol(bb): '2222' }</span>

Object<span class="token punctuation">.</span><span class="token function">defineProperties</span><span class="token punctuation">(</span> obj<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>s3<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token punctuation">{</span>value<span class="token operator">:</span> <span class="token string">'333'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>s4<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token punctuation">{</span>value<span class="token operator">:</span> <span class="token string">'444'</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { Symbol(aa): 123, Symbol(bb): '2222', Symbol(cc): '333', Symbol('dd': '4444') }</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><ul><li><code>Object.getOwnPropertyNames()</code> 返回对象实例的<strong>常规属性数组</strong>。</li> <li><code>Object.getOwnPropertySymbols()</code> 返回对象实例的<strong>符号属性数组</strong>。</li> <li><code>Reflect.ownKeys()</code> 返回对象实例的<strong>常规属性数组和符号属性数组</strong>。</li> <li><code>Object.getOwnPropertyDescriptors()</code> 返回同时包含<strong>常规属性和符号属性的对象</strong>。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'ls'</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'say'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token string">'mine'</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyNames</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//  [&quot;name&quot;, &quot;age&quot;]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">getOwnPropertySymbols</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [Symbol(say)]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Reflect<span class="token punctuation">.</span><span class="token function">ownKeys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['name', 'age', Symbol(say)]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptors</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/*
{
    name: {value: 'ls', writtable: true, enumerable: true, configurable: true},
    age: {...},
    Symbol(say): {...}
}
*/</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><ul><li>因为符号属性是对内存中符号的一个引用，所以直接创建并用作属性的符号不会消失。但是如果没有<strong>显式</strong>的保存对这些属性的引用，就必须遍历对象的所有符号属性才能找到相应的属性键：</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> o <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token string">'ls'</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'age'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token number">18</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> barSymbol <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getOwnPropertySymbols</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token function">String</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/nam/</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>barSymbol<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Symbol(name)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ol start="4"><li>常用内置符号</li></ol> <ul><li>内置符号用于暴露语言内部行为，开发者可以直接访问、重写或模拟这些行为。</li> <li>内置符号最重要的用途是重新定义它们，来改变原生结构的行为。如<code>for-of</code>循环会在相关对象上使用<code>Symbol.iterator</code>属性，我们可以通过在自定义对象上重新定义<code>Symbol.iterator</code>的值，来改变<code>for-of</code>在迭代该对象时的行为。</li> <li>内置符号以<code>Symbol</code>工厂函数<strong>字符串属性</strong>的形式存在，指向一个符号的实例。</li> <li>所有<strong>内置符号属性</strong>都是不可写、不可枚举、不可配置的。</li></ul> <ol start="5"><li><p>Symbol.asyncIterator</p></li> <li><p>Symbol.hasInstance</p></li> <li><p>Symbol.isConcatSpreadable</p></li> <li><p>Symbol.inerator</p></li> <li><p>Symbol.match</p></li> <li><p>Symbol.replace</p></li> <li><p>Symbol.search</p></li> <li><p>Symbol.species</p></li> <li><p>Symbol.split</p></li> <li><p>Symbol.toPrimitive</p></li> <li><p>Symbol.toStringTag</p></li> <li><p>Symbol.upscopables</p></li></ol> <h3 id="_3-4-8-object-类型"><a href="#_3-4-8-object-类型" class="header-anchor">#</a> 3.4.8 Object 类型</h3> <p>ECMAScript中的对象其实就是一组数据和功能的集合，对象通过<code>new</code>操作符后跟对象类型的名称创建。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">const</span> o <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>ECMAScript中的Object也是派生其他对象的基类，Object类型的书友属性和方法在派生对象上同样存在。</p> <p>每个Object实例都有如下属性和方法：</p> <ul><li><p>constructor：用于创建当前对象的函数。在前面例子中，这个属性的值是Object()函数。</p></li> <li><p>hasOwnProperty(propertyName)：判断当前对象实例（不是原型）上是否存在给定的属性，要检查的属性名必须是字符串。</p></li> <li><p>propertyIsEnumerable(propertyName)：判断给定的属性是否可用for-of语句枚举，属性名必须是字符串。</p></li> <li><p>isPropertyOf(对象实例)：判断当前对象是否是另一个对象的原型。</p></li> <li><p>toLocalaString()：返回对象的字符串表示，该字符串反映对象所在的本地化执行环境。</p></li> <li><p>toString()：返回对象的字符串表示。</p></li> <li><p>valueOf()：返回对象对应的字符串、数值、布尔值表示。</p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">let</span> o <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> sym <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    o <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token number">10</span><span class="token operator">:</span> <span class="token string">'数值'</span><span class="token punctuation">,</span>
      name<span class="token operator">:</span> <span class="token string">'字符串值'</span><span class="token punctuation">,</span>
      <span class="token punctuation">[</span>sym<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token string">'符号1'</span><span class="token punctuation">,</span>
      <span class="token punctuation">[</span><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'sym2'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token string">'符号2'</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// isPrototypeOf</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">isPrototypeOf</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>

    <span class="token comment">// hasOwnProperty</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> o<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">if</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 10   name, 这里检测不出来符号键，但是下面代码中，单独检测可以检测到</span>
      <span class="token punctuation">}</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span><span class="token function">propertyIsEnumerable</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 属性名必须是字符串</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 数值。 字符串值</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>sym<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// true ， 单独检测可以</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'sym2'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// false, 相同描述的符号也是不相等的</span>

    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> o<span class="token punctuation">.</span><span class="token function">toLocaleString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// [object Object] [object Object]</span>

    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">/*
        {
            10: '数值',
            name: '字符串',
            Symbol(test): '符号1',
            Symbol(sym2): '符号2',
            __proto__: {
                constructor: f Object(),
                hasOwnProperty: f hasOwnProperty(),
                isPropertyOf: f isPropertyOf(),
                propertyEnumerable: f propertyEnumerable(),
                toLocalaString: f toLocalaString(),
                toString: f toString(),
                valueOf: f valueOf(),
                …
            }
        }
    */</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br></div></div><h2 id="_3-5-操作符"><a href="#_3-5-操作符" class="header-anchor">#</a> 3.5 操作符</h2> <p><strong>操作符</strong>用于<strong>操作数据值</strong>，包括数学操作符（如加、减）、位操作符、关系操作符和相等操作符等。ECMAScript中的操作符<strong>可以用于各种值</strong>，包括字符串、数值、布尔值甚至对象。在<strong>应用于对象</strong>时，操作符通常会调用<code>valueOf()</code>和/或<code>toString()</code>方法来取得可以计算的值。</p> <h3 id="_3-5-1-一元操作符"><a href="#_3-5-1-一元操作符" class="header-anchor">#</a> 3.5.1 一元操作符</h3> <p>只操作一个值的操作符叫做<strong>一元操作符</strong>(unary operator)。</p> <h4 id="_1-递增-递减操作符"><a href="#_1-递增-递减操作符" class="header-anchor">#</a> 1. 递增/递减操作符</h4> <p>递增和递减操作符照搬自C语言。但有两个版本：前缀版和后缀版。区别是前缀版会先进行自增/自减操作，再进行语句求值。后缀版先进行语句求值，再自增/自减。当递增/递减是唯一的操作时，这种差异没有影响，但是和其他操作混合时，差异明显：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 唯一操作</span>
<span class="token comment">// 前置递增</span>
    <span class="token keyword">let</span> num1 <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token operator">++</span>num1<span class="token punctuation">;</span> <span class="token comment">// 相当于num1 = num1 + 1;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token number">11</span>
<span class="token comment">// 后置自增</span>
    <span class="token keyword">let</span> num1 <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    num1<span class="token operator">++</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token number">11</span>

<span class="token comment">// 和其他操作混合</span>
<span class="token comment">// 前置</span>
    <span class="token keyword">let</span> num1 <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> num2 <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token operator">++</span>num1 <span class="token operator">+</span> <span class="token number">20</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 31</span>
<span class="token comment">// 后置</span>
    <span class="token keyword">let</span> num1 <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> num2 <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> num <span class="token operator">=</span> num1<span class="token operator">++</span> <span class="token operator">+</span> <span class="token number">20</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 30</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>递增和递减操作符遵循如下规则：</p> <ul><li>对于字符串，如果是有效数值形式，则转换为数值后再应用改变；如果不是，则将变量的值设置为<code>NaN</code>。变量类型从字符串变为数值。</li> <li>对于布尔值，<code>true</code>则转换为1、<code>false</code>则转换为0后再应用改变。变量类型由布尔转换为数值。</li> <li>对于浮点值，加1或者减1。</li> <li>对于对象，则调用<code>valueOf()</code>取得可以操作的值，对得到的值应用上述规则。如果是<code>NaN</code>，则调用<code>toString()</code>并再次应用其他规则。变量类型从对象变为数值。
例：</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">const</span> v1 <span class="token operator">=</span> <span class="token string">'2'</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> v2 <span class="token operator">=</span> <span class="token string">'aa'</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> v3 <span class="token operator">=</span> <span class="token number">1.222</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> v4 <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> v5 <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">++</span>v1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">++</span>v2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// NaN</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">++</span>v3<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2.222</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">++</span>v4<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">++</span>v5<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h4 id="_2-一元加和减"><a href="#_2-一元加和减" class="header-anchor">#</a> 2. 一元加和减</h4> <p><strong>一元加和减操作符</strong>主要用于基本的算数（一元加由一个加号表示，一元减减号表示，放在变量前面），也可以用于数据类型转换。规则如下：</p> <ul><li>应用于数值时，一元加对数值无影响；一元减把数值变为相反数。</li> <li>应用于非数值，会执行与<code>Number()</code>转型函数一样的类型转换：布尔值转换为0和1，字符串根据特殊规则解析，对象会调用它们的valueOf()和/或toString()方法以得到可以转换的值。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> v1 <span class="token operator">=</span> <span class="token string">'01'</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> v2 <span class="token operator">=</span> <span class="token string">'1.1'</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> v3 <span class="token operator">=</span> <span class="token string">'z'</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> v4 <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> v5 <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">200</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
v1 <span class="token operator">=</span> <span class="token operator">-</span>v1<span class="token punctuation">;</span> <span class="token comment">// -1</span>
v2 <span class="token operator">=</span> <span class="token operator">-</span>v2<span class="token punctuation">;</span> <span class="token comment">// -1.1</span>
v3 <span class="token operator">=</span> <span class="token operator">-</span>v3<span class="token punctuation">;</span> <span class="token comment">// NaN</span>
v4 <span class="token operator">=</span> <span class="token operator">-</span>v4<span class="token punctuation">;</span> <span class="token comment">// -1</span>
v5 <span class="token operator">=</span> <span class="token operator">-</span>v5<span class="token punctuation">;</span> <span class="token comment">// 200</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="_3-5-2-位操作符"><a href="#_3-5-2-位操作符" class="header-anchor">#</a> 3.5.2 位操作符</h3> <p><strong>位操作符</strong>用于数值的底层操作，就是操作内存中表示数据的比特（位）。ECMAScript中所有数值都已IEEE 754  64位格式存储，但位操作并不直接应用到64位表示，而是先把数值转换为32位整数，再进行位操作，之后再把结果转换为64位（这个转换导致特殊值<code>NaN</code>和<code>Infinity</code>在位操作中会当成0处理）。因为64位整数存储格式是不可见的，所以只需要考虑32位整数即可。</p> <p><strong>整数</strong>分为有符号整数和无符号整数：<br> <strong>有符号整数</strong>的前31位表示整数值，第32位称为<strong>符号位</strong>，表示数值的符号，0为正、1为负。在处理有符号整数时，我们<strong>无法访问符号位</strong>。</p> <ul><li><strong>正值</strong>以真正的二进制格式存储，即31位中每一位都代表2的幂。从右向左第一位（称为第0位）表示2^0，第二位（称为第1位）表示2^1，依此类推。如果一个位是空的，就用0填充，相当于忽略不计：</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 18 的 二进制格式为 0000 0000 0000 0000 0000 0000 0001 0010， 更精简的写法为 10010，用五个有效位决定了实际的值。</span>
二进制格式：———<span class="token number">1</span>——————<span class="token number">0</span>—————— <span class="token number">0</span>————————<span class="token number">1</span>——————<span class="token number">0</span>———
进行幂运算：<span class="token number">1</span><span class="token operator">*</span><span class="token number">2</span><span class="token operator">^</span><span class="token number">4</span> <span class="token operator">+</span> <span class="token number">0</span><span class="token operator">*</span><span class="token number">2</span><span class="token operator">^</span><span class="token number">3</span> <span class="token operator">+</span> <span class="token number">0</span><span class="token operator">*</span><span class="token number">2</span><span class="token operator">^</span><span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token operator">*</span><span class="token number">2</span><span class="token operator">^</span><span class="token number">1</span> <span class="token operator">+</span> <span class="token number">0</span><span class="token operator">*</span><span class="token number">2</span><span class="token operator">^</span><span class="token number">0</span><span class="token punctuation">;</span>
数值运算 ：<span class="token number">16</span> <span class="token operator">+</span> <span class="token number">0</span> <span class="token operator">+</span> <span class="token number">0</span> <span class="token operator">+</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">0</span>
十进制格式：<span class="token number">18</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li><strong>负数</strong>以补码（或二补数，一种二进制的编码）存储。一个数值的补码通过以下三个步骤计算得到：
<ol><li>确定绝对值的二进制表示（如-18，先确定18的二进制表示）；</li> <li>找到数值的反码（或一补数），即0都变成1，1都变成0；</li> <li>给结果加1。</li></ol></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>基于上述步骤，确定 <span class="token operator">-</span><span class="token number">18</span> 的二进制表示，首先取得<span class="token number">18</span>的二进制表示：
<span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0001</span> <span class="token number">0010</span>
计算反码：
<span class="token number">1111</span> <span class="token number">1111</span> <span class="token number">1111</span> <span class="token number">1111</span> <span class="token number">1111</span> <span class="token number">1111</span> <span class="token number">1110</span> <span class="token number">1101</span>
加<span class="token number">1</span>：
<span class="token number">1111</span> <span class="token number">1111</span> <span class="token number">1111</span> <span class="token number">1111</span> <span class="token number">1111</span> <span class="token number">1111</span> <span class="token number">1111</span> <span class="token number">1110</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>所以，-18的二进制表示就是1111 1111 1111 1111 1111 1111 1111 1110。ECMAScript会帮我们记录这些信息。在我们把负值输出为一个二进制字符串时，会得到一个前面加了减号的绝对值。如下所示：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">18</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;-10010&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>在将-18转换为二进制时，结果得到-10010，转换过程会求得补码，然后再以更符合逻辑的形式表现出来。</strong></p> <div class="custom-block tip"><p class="custom-block-title">注意（无符号整数）</p> <div class="language- extra-class"><pre><code>默认情况下，ECMAScript中所有整数都是有符号的，不过也有无符号整数，对其而言，第32位不表示符号，因为只有正值，因为符号位表示数值，所以无符号整数比有符号整数范围更大。
</code></pre></div></div> <div class="custom-block tip"><p class="custom-block-title">理解：反码加1是怎么加的？</p> <p>1111 1111 1111 1111 1111 1111 1110 1101<br>
加1得到：<br>
1111 1111 1111 1111 1111 1111 1111 1110<br>
1+1=0，进一位，所以倒数第二位由0变成1了。
二进制只有0和1，所以1再加的话就会进位，就好像十进制9再加的话就会进位。
用竖式加法更易懂：<br>
1101<br>
+<br>
0001<br>
----<br>
1110</p></div> <p>如果将位操作符应用到非数值，首先会使用<code>Number()</code>函数将该值转换为数值（此过程是自动的），然后再应用位操作。最终结果是数值。</p> <h4 id="_1-按位非"><a href="#_1-按位非" class="header-anchor">#</a> 1. 按位非</h4> <p>按位非操作符用<strong>波浪符（~）<strong>表示，作用是返回数值的</strong>反码</strong>（一补数）。属于二进制数学操作符。<br>
最终效果是<strong>对数值取反，再减1。</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> num1 <span class="token operator">=</span> <span class="token number">25</span><span class="token punctuation">;</span>    <span class="token comment">// 二进制    00000000000000000000000000011001</span>
<span class="token keyword">const</span> num2 <span class="token operator">=</span> <span class="token operator">~</span>num1<span class="token punctuation">;</span> <span class="token comment">// 二进制反码 11111111111111111111111111100110</span>
conssole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// -26</span>

<span class="token comment">// 相当于</span>
<span class="token keyword">const</span> num2 <span class="token operator">=</span> <span class="token operator">-</span>num1 <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token comment">// 但是位操作会快得多，因为位操作是在数值的底层完成的。</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="_2-按位与"><a href="#_2-按位与" class="header-anchor">#</a> 2. 按位与</h4> <p>按位与操作符用<strong>和号</strong>（&amp;）表示，有两个操作数。本质是将两个数的每一个位对齐，按真值表，对每一位执行与操作：</p> <table><thead><tr><th style="text-align:center;">第一个数值的位</th> <th style="text-align:center;">第二个数值的位</th> <th style="text-align:center;">结 果</th></tr></thead> <tbody><tr><td style="text-align:center;">1</td> <td style="text-align:center;">1</td> <td style="text-align:center;">1</td></tr> <tr><td style="text-align:center;">1</td> <td style="text-align:center;">0</td> <td style="text-align:center;">0</td></tr> <tr><td style="text-align:center;">0</td> <td style="text-align:center;">1</td> <td style="text-align:center;">0</td></tr> <tr><td style="text-align:center;">0</td> <td style="text-align:center;">0</td> <td style="text-align:center;">0</td></tr></tbody></table> <p><strong>只有在两个位都是1时返回1，任何一位是0都返回0。</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token number">25</span> <span class="token operator">&amp;</span> <span class="token number">3</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
<span class="token comment">// 二进制计算过程：</span>
<span class="token number">25</span><span class="token operator">=</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0001</span> <span class="token number">1001</span>
 <span class="token number">3</span> <span class="token operator">=</span><span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0011</span> 
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
<span class="token constant">AND</span><span class="token operator">=</span><span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0001</span>
<span class="token comment">// 结果只有第0位是1，因此值为1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="_3-按位或"><a href="#_3-按位或" class="header-anchor">#</a> 3. 按位或</h4> <p>按位或操作符用**管道符（|）**表示，有两个操作数。按位或遵循以下真值表：</p> <table><thead><tr><th style="text-align:center;">第一个数值的位</th> <th style="text-align:center;">第二个数值的位</th> <th style="text-align:center;">结果</th></tr></thead> <tbody><tr><td style="text-align:center;">1</td> <td style="text-align:center;">1</td> <td style="text-align:center;">1</td></tr> <tr><td style="text-align:center;">1</td> <td style="text-align:center;">0</td> <td style="text-align:center;">1</td></tr> <tr><td style="text-align:center;">0</td> <td style="text-align:center;">1</td> <td style="text-align:center;">1</td></tr> <tr><td style="text-align:center;">0</td> <td style="text-align:center;">0</td> <td style="text-align:center;">0</td></tr></tbody></table> <p><strong>按位或操作有一个是1就返回1，两个都是0才返回0。</strong>
对25和3执行按位或，代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token number">25</span> <span class="token operator">|</span> <span class="token number">3</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 27</span>
<span class="token comment">// 二进制计算过程：</span>
<span class="token number">25</span><span class="token operator">=</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0001</span> <span class="token number">1001</span>
 <span class="token number">3</span> <span class="token operator">=</span><span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0011</span> 
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
<span class="token constant">OR</span> <span class="token operator">=</span><span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0001</span> <span class="token number">1011</span>  <span class="token comment">// 二进制码：11011</span>
<span class="token comment">// 1*2^0 + 1*2^1 + 0 + 1*2^3 + 1*2^4 = 1 + 2 + 8 +16 = 27</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="_4-按位异或"><a href="#_4-按位异或" class="header-anchor">#</a> 4. 按位异或</h4> <p>按位异或用**脱字符（^）**表示，有两个操作数。真值表：</p> <table><thead><tr><th style="text-align:center;">第一个数值的位</th> <th style="text-align:center;">第二个数值的位</th> <th style="text-align:center;">结果</th></tr></thead> <tbody><tr><td style="text-align:center;">1</td> <td style="text-align:center;">1</td> <td style="text-align:center;">0</td></tr> <tr><td style="text-align:center;">1</td> <td style="text-align:center;">0</td> <td style="text-align:center;">1</td></tr> <tr><td style="text-align:center;">0</td> <td style="text-align:center;">1</td> <td style="text-align:center;">1</td></tr> <tr><td style="text-align:center;">0</td> <td style="text-align:center;">0</td> <td style="text-align:center;">0</td></tr></tbody></table> <p><strong>只有在其中一位是1时返回1，其余情况返回0。</strong></p> <p>对数值25和3执行按位异或，代码如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token number">25</span> <span class="token operator">^</span> <span class="token number">3</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 26</span>
<span class="token comment">// 二进制计算过程：</span>
<span class="token number">25</span><span class="token operator">=</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0001</span> <span class="token number">1001</span>
 <span class="token number">3</span> <span class="token operator">=</span><span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0011</span> 
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>
<span class="token constant">OR</span> <span class="token operator">=</span><span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0000</span> <span class="token number">0001</span> <span class="token number">1010</span> <span class="token comment">// 二进制码：11010</span>
<span class="token comment">// 0 + 1*2^1 + 0 + 1*2^3 + 1*2^4 = 2 + 8 +16 = 26</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="_5-左移"><a href="#_5-左移" class="header-anchor">#</a> 5. 左移</h4> <p>左移操作符用<strong>两个小于号（&lt;&lt;）<strong>表示，按照指定的位数将数值的所有</strong>位向左移动</strong>，左移操作符会<strong>保留</strong>它所操作数值的<strong>符号</strong>。<br>
比如数值2（二进制10）像左移5位，就会得到64（二进制1000000），如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">const</span> v1 <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// 等于二进制10</span>
    <span class="token keyword">const</span> v2 <span class="token operator">=</span> <span class="token operator">&lt;&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> <span class="token comment">// 等于二进制1000000， 即十进制64</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>在移位后，数值右端会空出5位，<strong>左移会以0填充空位</strong>。</p> <p><strong>数学意义：</strong>：在数字没有溢出时，对于正负数，左移一位相当于乘以2，左移n位相当于乘以2的n次方。</p> <h4 id="_6-右移"><a href="#_6-右移" class="header-anchor">#</a> 6. 右移</h4> <ul><li><strong>有符号右移</strong>用<strong>两</strong>个大于号（&gt;&gt;）表示，将数值的所有32位向右移，并保留符号，是左移的<strong>逆运算</strong>。比如讲64右移5位，得到2。右移后空位出现在左侧，且在符号位后，用<strong>符号位的值填充空位</strong>。</li> <li><strong>无符号右移</strong>用<strong>三</strong>个大于号（&gt;&gt;&gt;）表示，对正数来说，它与有符号右移一致，空位用0填充。对<strong>负数</strong>来说，<strong>空位用0填充</strong>（有符号右移会用1填充），所以数值差距很大。</li></ul> <p><strong>数学意义</strong>：有符号右移和无符号整数右移，右移一位相当于除以2，右移n位相当于除以2的n次方。</p> <h3 id="_3-5-3-布尔操作符"><a href="#_3-5-3-布尔操作符" class="header-anchor">#</a> 3.5.3 布尔操作符</h3> <p><strong>布尔操作符</strong>使js有能力测试两个值的关系，一共有三个：<strong>逻辑非、逻辑与、逻辑或。</strong></p> <h4 id="_1-逻辑非"><a href="#_1-逻辑非" class="header-anchor">#</a> 1. 逻辑非</h4> <ul><li>逻辑非操作符由<strong>一个叹号</strong>（!）表示，可应用给任何值，<strong>始终返回布尔值</strong>。首先将操作数转为布尔值，再取反。</li> <li>逻辑非操作符也可以用于把任意值转换为布尔值。同时用<strong>两个叹号</strong>（!!），相当于调用了转型函数<code>Boolean()</code>。</li></ul> <h4 id="_2-逻辑与"><a href="#_2-逻辑与" class="header-anchor">#</a> 2. 逻辑与</h4> <ul><li>逻辑与操作符由<strong>两个和号</strong>（&amp;&amp;）表示，可以用于任何类型的操作数。</li> <li>如果有操作数不是布尔值，则逻辑或<strong>不一定返回布尔值</strong>，而是遵循如下规则：
<ul><li>第一个操作数是对象，则返回第二个操作数。</li> <li>第二个操作数是对象，则只有第一个操作数被<strong>求值</strong>为true才返回该对象，否则返回第一个操作数。</li> <li>如果有一个操作数是null/ NaN / undefined，则返回null / NaN/ undefined。</li> <li><strong>总结：如果第一个操作数求值为true，就返回第二个操作数，否则返回第一个操作数。</strong></li></ul></li> <li>逻辑与操作符是<strong>短路操作符</strong>，就是如果第一个操作数决定了结果，就不会再对第二个操作数求值。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">const</span> boo <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> result <span class="token operator">=</span> boo <span class="token operator">&amp;&amp;</span> notDefinedValue<span class="token punctuation">;</span> <span class="token comment">// 这里报错，ReferenceError: notDefinedValue is not defined;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 不会执行这一行</span>
    <span class="token comment">// boo 变为 false 则不会报错：</span>
    <span class="token keyword">const</span> boo <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> result <span class="token operator">=</span> boo <span class="token operator">&amp;&amp;</span> notDefinedValue<span class="token punctuation">;</span> <span class="token comment">// 不会报错</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="_3-逻辑或"><a href="#_3-逻辑或" class="header-anchor">#</a> 3. 逻辑或</h4> <ul><li>逻辑或操作符由<strong>两个管道符</strong>表示（||）表示。</li> <li>如果有操作数不是布尔值，那么逻辑或操作符也不<strong>一定返回布尔值</strong>。遵循如下规则：
<ul><li>第一个操作数是对象，返回第一个操作数。</li> <li>第一个操作数求值为false，返回第二个操作数。</li> <li>两个操作数都是 null / NaN / undefined，则返回 null / NaN / undefined。</li> <li><strong>总结：第一个操作数求值为false，则返回第二个操作数，否则返回第一个操作数。</strong></li></ul></li> <li>逻辑或操作符常用于变量赋值（<code>let result = a || b</code>）。</li></ul> <h3 id="_3-5-4-乘性操作符"><a href="#_3-5-4-乘性操作符" class="header-anchor">#</a> 3.5.4 乘性操作符</h3> <p>ECMAScript定义了三个乘性操作符：<strong>乘法、除法、取模</strong>。如果有不是数值的操作数，会在后台使用<code>Number()</code>转型函数将其转换为数值。</p> <h4 id="_1-乘法操作符"><a href="#_1-乘法操作符" class="header-anchor">#</a> 1. 乘法操作符</h4> <p>由一个星号（*）表示，用于计算乘积。在处理特殊值时也有特殊行为：</p> <ul><li>操作数都是数值，则执行常规的乘法，当ECMAScript不能表示乘积时，则返回<code>Infinity</code>或<code>-Infinity</code>。</li> <li>任一操作数是<code>NaN</code>，则返回<code>NaN</code>。</li> <li><code>Infinity</code>乘以0，返回<code>NaN</code>。</li> <li><code>Infinity</code>乘以<code>Infinity</code>返回<code>Infinity</code>。</li> <li><code>Infinity</code>乘以非0有限数值，返回<code>Infinity</code>或者<code>-Infinity</code>。</li></ul> <h4 id="_2-除法操作符"><a href="#_2-除法操作符" class="header-anchor">#</a> 2. 除法操作符</h4> <p>由一个斜杠（/）表示，表示第一个操作数除以第二个操作数的商。</p> <ul><li>如果两个操作数都是非零数值，则执行常规除法运算。当ECMAScript不能表示商时，返回<code>Infinity</code>或<code>-Infinity</code>。</li> <li>任一操作数是<code>NaN</code>，则返回<code>NaN</code>。</li> <li>0除以0，返回<code>NaN</code>。</li> <li><code>Infinity</code>除以<code>Infinity</code>返回<code>NaN</code>。</li> <li>非零的有限值除以0，跟进第一个操作数的符号返回<code>Infinity</code>或<code>-Infinity</code>。</li> <li><code>Infinity</code>除以任何数值，跟进第二个操作数的符号返回<code>Infinity</code>或<code>-Infinity</code>。</li></ul> <ol start="3"><li>取模操作符<br>
取模（余数）操作符由一个百分比符号（%）表示，格式为 被除数 % 除数，比如：</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token number">26</span> <span class="token operator">%</span> <span class="token number">5</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>操作数都是数值，执行常规除法运算，返回余数。</li> <li>被除数是无限值，除数是有限值，返回<code>NaN</code>。</li> <li>被除数是无限值，除数的0，返回<code>NaN</code>。</li> <li>被除数是有限值，除数是无线值，返回被除数。</li> <li>操作数都是<code>Infinity</code>，返回<code>NaN</code>。</li> <li>被除数是0，除数不是0，返回0。</li></ul> <h3 id="_3-5-3-指数操作符"><a href="#_3-5-3-指数操作符" class="header-anchor">#</a> 3.5.3 指数操作符</h3> <p>ES7新增了<strong>指数操作符</strong><code>**</code>，与<code>Math.pow()</code>的效果是一样的。<br>
指数操作符还有自己的<strong>指数赋值操作符</strong><code>**=</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 指数操作符</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2^3 = 8;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span> <span class="token operator">**</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 9</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">16</span> <span class="token operator">**</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 4</span>
<span class="token comment">// 指数赋值操作符</span>
<span class="token keyword">const</span> square <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
square <span class="token operator">**=</span> <span class="token number">2</span><span class="token punctuation">;</span>  <span class="token comment">// 相当于 square = square ** 2，与乘/除性赋值运算符一样， *= /=</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>square<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 16</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_3-5-6-加性操作符"><a href="#_3-5-6-加性操作符" class="header-anchor">#</a> 3.5.6 加性操作符</h3> <p>加性操作符，即加法和减法操作符。加性操作符会在后台发生不同数据类型的转换，只不过并不直观。</p> <h4 id="_1-加法操作符"><a href="#_1-加法操作符" class="header-anchor">#</a> 1. 加法操作符</h4> <p>加法操作符（+）用于求两个数的和。</p> <ul><li>如果两个操作数都是数值，则执行加法运算并运用如下规则返回结果：
<ul><li>任意操作数是<code>NaN</code>，返回<code>NaN</code>。</li> <li><code>Infinity</code>加<code>Infinity</code>，返回<code>Infinity</code>。</li> <li><code>-Infinity</code>加<code>-Infinity</code>，返回<code>-Infinity</code>。</li> <li><code>Infinity</code>加<code>-Infinity</code>，返回<code>NaN</code>。</li> <li>+0加+0，返回+0。</li> <li>+0加-0，返回+0。</li> <li>-0加-0，返回-0。</li></ul></li> <li>如果操作数中有字符串：
<ul><li>两个操作数都是字符串，把第二个字符串拼接到第一个字符串后面。</li> <li>如果有一个操作数是字符串，就把另一个操作数转为字符串，然后再拼接。</li></ul></li> <li>如果任一操作数是对象、布尔值，则调用他们的<code>toString()</code>方法以获得字符串，再应用前面字符串的规则。</li> <li>对于<code>null</code>和<code>undefined</code>，则调用<code>String()</code>函数。分别获取<code>'null'</code>和<code>'undefined'</code>。</li></ul> <div class="custom-block tip"><p class="custom-block-title">注意</p> <p>ECMAScript中最常犯的一个错误，就是忽略加法操作中设计的数据类型。比如：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> num1 <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> num2 <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> message <span class="token operator">=</span> <span class="token string">&quot;The sum of 5 and 10 is&quot;</span> <span class="token operator">+</span> num1 <span class="token operator">+</span> num2<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// The sum of 5 and 10 is 510，因为每次加法运算都是独立完成的，第一次操作是字符串和5，得到一个字符串，再与10进行加法运算，仍然得到字符串。</span>
<span class="token comment">// 如果想真正执行数学运算，只需要使用 一对括号：</span>
<span class="token keyword">let</span> num1 <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> num2 <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> message <span class="token operator">=</span> <span class="token string">&quot;The sum of 5 and 10 is&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>num1 <span class="token operator">+</span> num2<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// The sum of 5 and 10 is 15，括号的意思是让 解释器下先执行 两个数值的加法</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></div> <h4 id="_2-减法操作符"><a href="#_2-减法操作符" class="header-anchor">#</a> 2. 减法操作符</h4> <p>减法操作符（-）处理不同类型转换的规则如下：</p> <ul><li>两个操作数都是数值，执行数学减法运算并返回结果。
<ul><li>任一操作数是<code>NaN</code>，返回<code>NaN</code>。</li> <li><code>Infinity</code>减<code>Infinity</code>，返回<code>NaN</code>。</li> <li><code>-Infinity</code>减<code>-Infinity</code>，返回<code>NaN</code>。</li> <li><code>Infinity</code>减<code>-Infinity</code>，返回<code>Infinity</code>。</li> <li><code>-Infinity</code>减<code>Infinity</code>，返回<code>-Infinity</code>。</li> <li>+0减+0，返回+0。</li> <li>+0减-0，返回-0。</li> <li>-0减-0，返回+0。</li></ul></li> <li>任一操作数是字符串、布尔值、<code>null</code>、<code>undefined</code>，现在后台使用<code>Number()</code>转型函数将其转换为数值，再应用以上规则。</li> <li>任一操作数是对象，则调用<code>valueOf()</code>方法取得它的数值。如果该值是<code>NaN</code>，则结果是<code>NaN</code>。如果对象没有<code>valueOf()</code>方法，则调用其<code>toString()</code>方法，再将得到的字符串转换为数值。</li></ul> <h3 id="_3-5-7-关系操作符"><a href="#_3-5-7-关系操作符" class="header-anchor">#</a> 3.5.7 关系操作符</h3> <p>关系操作符执行比较两个值的操作，包括大于（&gt;）、小于（&lt;）、大于等于（&lt;=）、小于等于（&gt;=），它们<strong>都返回布尔值</strong>。
应用到不同类型时也会发生类型转换和其他行为：</p> <ul><li>操作数<strong>都是数值</strong>，则执行数值比较。</li> <li><strong>都是字符串</strong>，比较字符串对应字符的编码，这些编码是数值，大写字母的编码都小于小写字母的编码。</li> <li>任一操作数是数值，就把另一个操作数转为数值再比较。</li> <li>任一操作数是对象，就调用其<code>valueOf()</code>方法（没有<code>valueOf()</code>就调用其<code>toString()</code>方法），再运用以上规则。</li> <li><strong>布尔值</strong>转为数值再比较。</li> <li>任一操作数为<code>NaN</code>（或被求值为<code>NaN</code>），则返回<code>false</code>。</li></ul> <h3 id="_3-5-8-相等操作符"><a href="#_3-5-8-相等操作符" class="header-anchor">#</a> 3.5.8 相等操作符</h3> <p>ECMAScript提供了<strong>两组</strong>操作符，第一组是<strong>等于和不等于</strong>，它们在比较之前执行类型转换。第二组是<strong>全等和不全等</strong>，它们在比较之前<strong>不</strong>执行类型转换。</p> <h4 id="_1-等于和不等于"><a href="#_1-等于和不等于" class="header-anchor">#</a> 1. 等于和不等于</h4> <p>等于操作符用（==）表示，不等于操作符用（!=）表示，它们都会先进行类型转换（ 称为强制类型转换），再确定操作数是否相等。</p> <p>进行类型转换时，遵循如下规则：</p> <ul><li>布尔值，先将其转为数值再比较。</li> <li>字符串和数值比较，先将字符串转为数值。</li> <li>如果只有一个操作数是对象，就调用对象的<code>valueOf()</code>方法取得原始值，再应用以上规则。</li></ul> <p>进行比较时，这两个操作符遵循如下规则：</p> <ul><li><code>null</code>和<code>undefined</code>相等。</li> <li><code>null</code>和<code>undefined</code>不能转换为其它类型的值再比较。</li> <li>任一操作数是<code>NaN</code>，则相等操作符返回<code>false</code>，不相等操作符返回<code>true</code>。</li> <li>两个操作数都是对象就比较它们是不是都指向同一个对象，是则返回<code>true</code>。</li></ul> <p>下表展示特殊情况的比较结果：</p> <table><thead><tr><th style="text-align:left;">表达式</th> <th style="text-align:center;">结果</th></tr></thead> <tbody><tr><td style="text-align:left;">null == undefined</td> <td style="text-align:center;">true</td></tr> <tr><td style="text-align:left;">&quot;NaN&quot; == NaN</td> <td style="text-align:center;">false</td></tr> <tr><td style="text-align:left;">5 == NaN</td> <td style="text-align:center;">false</td></tr> <tr><td style="text-align:left;">NaN != NaN</td> <td style="text-align:center;">true</td></tr> <tr><td style="text-align:left;">false == 0</td> <td style="text-align:center;">true</td></tr> <tr><td style="text-align:left;">true == 2</td> <td style="text-align:center;">false</td></tr> <tr><td style="text-align:left;">undefined == 0</td> <td style="text-align:center;">false</td></tr> <tr><td style="text-align:left;">null == 0</td> <td style="text-align:center;">false</td></tr> <tr><td style="text-align:left;">&quot;5&quot; == 5</td> <td style="text-align:center;">true</td></tr></tbody></table> <h4 id="_2-全等和不全等"><a href="#_2-全等和不全等" class="header-anchor">#</a> 2.全等和不全等</h4> <p>全等操作符使用（===）表示，不全等操作符使用（!==）表示，它们在比较前<strong>不</strong>转换操作数，这两个操作符有助于在代码中<strong>保持数据类型的完整性</strong>。</p> <h3 id="_3-5-9-条件操作符"><a href="#_3-5-9-条件操作符" class="header-anchor">#</a> 3.5.9 条件操作符</h3> <p>也即三元运算符，语法和Java一样：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> val <span class="token operator">=</span> <span class="token constant">A</span> <span class="token operator">&gt;</span> <span class="token constant">B</span> <span class="token operator">?</span> <span class="token string">'yes'</span> <span class="token operator">:</span> <span class="token string">'no'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_3-5-10-赋值操作符"><a href="#_3-5-10-赋值操作符" class="header-anchor">#</a> 3.5.10 赋值操作符</h3> <ol><li><strong>简单赋值</strong>用（=）表示。</li> <li><strong>复合赋值</strong>使用乘性、加性或位操作符后跟（=）表示，是常见赋值操作的简写形式</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
num <span class="token operator">=</span> num<span class="token operator">+</span><span class="token number">10</span><span class="token punctuation">;</span>
<span class="token comment">// 复合赋值：</span>
<span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
num <span class="token operator">+=</span> <span class="token number">10</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ol start="3"><li>每个数学操作符和其他一些操作符都有对应的复合赋值操作符：
<ul><li>乘后赋值(*=)</li> <li>除后赋值(/=)</li> <li>取模后赋值(%=)</li> <li>加后赋值(+=)</li> <li>减后赋值(-=)</li> <li>左移后赋值(&lt;&lt;=)</li> <li>右移后赋值(&gt;&gt;=)</li> <li>无符号右移后赋值(&gt;&gt;&gt;=)</li></ul></li></ol> <p>这些操作符仅仅是简写语法，不会提升性能。</p> <h3 id="_3-5-11-逗号操作符"><a href="#_3-5-11-逗号操作符" class="header-anchor">#</a> 3.5.11 逗号操作符</h3> <p>用来在<strong>一条语句中执行多个操作</strong></p> <ul><li>同时声明多个变量</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> v1 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> v2 <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> v3 <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>赋值赋值，返回最后一个值（几乎不用）</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> val <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// val 的值为3</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_3-6-语句"><a href="#_3-6-语句" class="header-anchor">#</a> 3.6 语句</h2> <p><strong>语句（也称为流控制语句）<strong>使用一个或多个</strong>关键字完成</strong>既定的<strong>任务</strong>。<strong>简单</strong>的如告诉函数退出，<strong>复杂</strong>的如列出一堆要重复执行的指令。</p> <h3 id="_3-6-1-if-语句"><a href="#_3-6-1-if-语句" class="header-anchor">#</a> 3.6.1 if 语句</h3> <ul><li>if语句的条件可以是任何表达式，ECMAScript会调用<code>Boolean()</code>转型函数将表达式转换为布尔值。</li> <li>if语句在只有一行代码时可以省略语句块，但<strong>最佳实践是始终使用语句块</strong>。</li> <li>可以连续使用多个if语句，语法如下：</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">{</span>
    ……
<span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">{</span>
    ……
<span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
    ……
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_3-6-2-do-while-语句"><a href="#_3-6-2-do-while-语句" class="header-anchor">#</a> 3.6.2 do-while 语句</h3> <p>do-while 语句是一种<strong>后测试循环语句</strong>，即循环体中的代码执行后才会对<strong>退出条件</strong>进行求值，也就是说循环体内的代码<strong>至少要执行一次</strong>，语法如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">do</span> <span class="token punctuation">{</span>
    statement
<span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span>condition<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 示例</span>
<span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">do</span> <span class="token punctuation">{</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0 2 4 6 8</span>
    i <span class="token operator">+=</span> <span class="token number">2</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2 4 6 8 10</span>
<span class="token punctuation">}</span> <span class="token keyword">while</span><span class="token punctuation">(</span>i<span class="token operator">&lt;</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 10</span>
<span class="token comment">// for循环的情况下</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">10</span><span class="token punctuation">;</span>i<span class="token operator">+=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 0 2 4 6 8</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="_3-6-3-while-语句"><a href="#_3-6-3-while-语句" class="header-anchor">#</a> 3.6.3 while 语句</h3> <p>while语句是一种<strong>先测试循环语句</strong>，即<strong>先检测退出条件</strong>，再执行循环体内的代码，因为while循环体内的代码可能永远不会执行，语法如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">while</span><span class="token punctuation">(</span>condition<span class="token punctuation">)</span><span class="token punctuation">{</span>
    statement<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 示例</span>
<span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">while</span><span class="token punctuation">(</span>i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0 2 4 6 8 </span>
    i <span class="token operator">+=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2 4 6 8 10</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 10</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="_3-6-4-for-语句"><a href="#_3-6-4-for-语句" class="header-anchor">#</a> 3.6.4 for 语句</h3> <ol><li>for语句也是<strong>先测试语句</strong>，只是<strong>增加了进入循环前的初始化代码，以及循环后要执行的表达式</strong>。语法如下：</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">if</span><span class="token punctuation">(</span>init<span class="token punctuation">,</span> condition<span class="token punctuation">,</span> expression<span class="token punctuation">)</span><span class="token punctuation">{</span>
    statement<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 示例：</span>
<span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>count<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0 - 9</span>
<span class="token punctuation">}</span>
<span class="token comment">// 上面的for循环和下面的while循环是一样的</span>
<span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">while</span><span class="token punctuation">(</span>i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0 - 9</span>
    i<span class="token operator">++</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1 - 10</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><ol start="2"><li><p>for循环语句<strong>先求值条件表达式，如果结果为true，则执行循环体，然后执行循环后表达式</strong>，如图所示：
<img src="/images/forLoop.png"></p></li> <li><p>无法通过while循环实现的逻辑，也无法通过for循环实现，，因此for循环只是将循环相关的代码封装在了一起而已。</p></li> <li><p>在for循环的<strong>初始化代码</strong>中，是可以<strong>不用变量声明关键字</strong>的，但是初始化定义的迭代器变量在循环执行完成后几乎就用不到了，所以<strong>最佳实践是使用let声明迭代器变量</strong>，<strong>将变量的作用域限定在循环中</strong>。</p></li> <li><p>初始化、条件表达式和循环后表达式都不是必需的，下面的写法可以创建无穷循环：</p></li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 无穷循环</span>
<span class="token keyword">for</span><span class="token punctuation">(</span> <span class="token punctuation">;</span> <span class="token punctuation">;</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ol start="6"><li>如果只包含条件表达式，for循环实际就变成了while循环：</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">while</span><span class="token punctuation">(</span>i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    i<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_3-6-5-for-in-语句"><a href="#_3-6-5-for-in-语句" class="header-anchor">#</a> 3.6.5 for-in 语句</h3> <ol><li>for-in语句是严格的迭代语句，用于枚举对象的<strong>非符号</strong>属性。语法如下</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">const</span> property <span class="token keyword">in</span> expression<span class="token punctuation">)</span><span class="token punctuation">{</span>
    statement
<span class="token punctuation">}</span>
<span class="token comment">// 示例</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">const</span> propName <span class="token keyword">in</span> window<span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>propName<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ol start="2"><li><code>const</code>不必需，但是为了确保这个局部变量不被修改，最佳实践是使用<code>const</code>。</li> <li>因为ECMAScript中对象的属性是无序的，所以for-in语句<strong>不能保证返回对象属性的顺序</strong>。</li> <li>如果for-in 循环要迭代的变量是<code>null</code>或<code>undefined</code>，则不执行循环体。</li></ol> <h3 id="_3-6-6-for-of-语句"><a href="#_3-6-6-for-of-语句" class="header-anchor">#</a> 3.6.6 for-of 语句</h3> <ol><li>for-of语句是严格的迭代语句，用于<strong>遍历</strong>可迭代对象的<strong>元素</strong>。语法如下：</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">const</span> property <span class="token keyword">of</span> arr<span class="token punctuation">)</span><span class="token punctuation">{</span>
    statement<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 示例</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">const</span> val <span class="token keyword">of</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1 2 3</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ol start="2"><li><code>const</code>不必需，但是为了确保这个局部变量不被修改，最佳实践是使用<code>const</code>。</li> <li>for-of会按照可迭代对象的<code>next()</code>方法产生值的顺序迭代元素（可迭代对象在第7章详细介绍）。</li> <li>如果尝试迭代的变量不支持迭代，for-of会抛出错误（TypeError: window is not iterable）。</li></ol> <div class="custom-block tip"><p class="custom-block-title">注意</p> <p>ES2018/ES9 对for-of语句进行了扩展，增加了for-await-of循环，以支持生成promise的异步可迭代对象（见附录A）。</p></div> <h3 id="_3-6-7-标签语句"><a href="#_3-6-7-标签语句" class="header-anchor">#</a> 3.6.7 标签语句</h3> <p>标签语句用于<strong>给语句加标签</strong>，语法如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>label<span class="token operator">:</span> statement
<span class="token comment">// 下面是例子</span>
start<span class="token operator">:</span> <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>在上例中，start是一个标签，可以在后面通过<code>break</code>或<code>continue</code>语句引用。标签语句的典型应用场景是<strong>嵌套循环</strong>。</p> <h3 id="_3-6-8-break-和-continue语句"><a href="#_3-6-8-break-和-continue语句" class="header-anchor">#</a> 3.6.8 break 和 continue语句</h3> <ol><li><code>break</code>和<code>continue</code>语句为执行循环代码提供了更严格的控制手段。<code>break</code>语句会立即退出循环，强制执行循环<strong>后</strong>的下一条语句。<code>continue</code>语句也会立即退出循环，但会<strong>再次从循环顶部开始执行</strong>。示例如下：</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// break 语句</span>
<span class="token comment">// i等于5时，break语句导致循环退出，该次循环不会执行num递增的代码</span>
<span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">%</span><span class="token number">5</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    num<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 5</span>
<span class="token comment">// continue 语句</span>
<span class="token comment">// i等于5时，循环会在递增num前退出，但会执行下一次迭代，此时i是6</span>
<span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>i<span class="token operator">%</span><span class="token number">5</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">continue</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    num<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 8</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><ol start="2"><li><code>break</code>语句和<code>continue</code>语句都可以和<strong>标签语句</strong>一起用，返回到代码中特定的位置。通常用在<strong>嵌套循环</strong>中。如下所示：</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// break语句</span>
<span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
outermost<span class="token operator">:</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> j<span class="token operator">&lt;</span><span class="token number">10</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">===</span> <span class="token number">5</span> <span class="token operator">&amp;&amp;</span> j <span class="token operator">===</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">break</span> outermost<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        num<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 55</span>
<span class="token comment">// 本例中，outermost标签标识第一个for语句。正常每个for循环执行十次，意味着num++执行100次，num的最终值是100。但是break语句表明了要退出的标签。添加标签不仅让break退出内部循环，也会退出外不循环。当i和j都等于5时，循环停止执行，此时num为55。</span>

<span class="token comment">// continue语句也可以使用标签：</span>
<span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
outermost<span class="token operator">:</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> j<span class="token operator">&lt;</span><span class="token number">10</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">===</span> <span class="token number">5</span> <span class="token operator">&amp;&amp;</span> j <span class="token operator">===</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">continue</span> outermost<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        num<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 95</span>
<span class="token comment">// continue语句会强制循环继续执行，但不是继续执行内部循环，而是继续执行外不循环。导致内部循环少执行5次（i等于5，j=5-9的五次）。num为95。</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>组合使用标签语句和<code>break</code>、<code>continue</code>语句能够实现<strong>复杂逻辑</strong>，但也容易<strong>出错</strong>，应该使用<strong>描述性强</strong>的文本作为标签，并且嵌套也<strong>不要太深</strong>。</p> <h3 id="_3-6-9-with-语句"><a href="#_3-6-9-with-语句" class="header-anchor">#</a> 3.6.9 with 语句</h3> <p><code>with</code>语句的用途是将代码作用域设置为特定的对象，语法如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">with</span><span class="token punctuation">(</span>expression<span class="token punctuation">)</span><span class="token punctuation">{</span>
    statement<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>with</code>语句的<strong>使用场景</strong>是针对一个对象进行反复操作，这时可以把代码作用域设置为该对象，如下例：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> qs <span class="token operator">=</span> location<span class="token punctuation">.</span>search<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> url <span class="token operator">=</span> location<span class="token punctuation">.</span>href<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>上面代码都用到<code>locaiton</code>对象，使用<code>with</code>语句可以减少些代码：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">with</span><span class="token punctuation">(</span>location<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> qs <span class="token operator">=</span> search<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> url <span class="token operator">=</span> href<span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>qs<span class="token punctuation">,</span> url<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>qs<span class="token punctuation">,</span> url<span class="token punctuation">)</span> <span class="token comment">// 报错: qs is not defined;  如果把const声明换成var，则可以正确打印结果，因为const有块级作用域。</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>这里的<code>with</code>语句用于连接<code>location</code>对象。这意味着在语句内部，每个变量首先会被认为是一个局部变量，如果没有找到该局部变量，则会搜索<code>location</code>对象，看它是否有同名属性。如果有，则该变量会被求值为<code>location</code>对象的属性。</p> <div class="custom-block tip"><p class="custom-block-title">警告</p> <ol><li>严格模式不允许使用with语句，会抛出错误。</li> <li>with语句影响性能且难以调试其中的代码，所以不推荐开发中使用。</li></ol></div> <h3 id="_3-6-10-switch-语句"><a href="#_3-6-10-switch-语句" class="header-anchor">#</a> 3.6.10 switch 语句</h3> <p><code>switch</code>语句是与<code>if</code>语句紧密相关的一种<strong>流控制语句</strong>，从其他语言借鉴而来。ECMAScript中的<code>switch</code>语句与C语言中的<code>switch</code>语句<strong>语法</strong>相似，如下所示：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">switch</span> <span class="token punctuation">(</span>expression<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> value1<span class="token operator">:</span>
        statement<span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> value2<span class="token operator">:</span>
        statement<span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    defaule<span class="token operator">:</span>
        statement<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>每个<code>case</code>(条件/分支)相当于：“如果表达式等于后面的值，则执行下面的语句”。<code>break</code>关键字会导致代码执行<strong>跳出</strong><code>switch</code>语句。没有<code>break</code>，代码会继续匹配下一个条件。<code>default</code>关键字用于在任何条件都不匹配时指定<strong>默认执行</strong>的语句（相当于else语句）。</p> <p>为避免不必要的条件判断，最佳实践是每个条件后面都加上<code>break</code>语句。如果确实需要<code>连续匹配几个条件</code>，应该写注释表明是<strong>故意忽略</strong>了<code>break</code>，如下所示：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">switch</span> <span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span>
    <span class="token comment">// 跳过</span>
    <span class="token keyword">case</span> <span class="token number">2</span><span class="token operator">:</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'1 or 2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token number">3</span><span class="token operator">:</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'3'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'default'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>虽然<code>switch</code>语句是借鉴其他语言的，但ECMAScript为它赋予了一些<strong>独有特性：</strong></p> <ul><li><code>switch</code>可以用于所有数据类型（很多语言中只能用于数值），因此可以使用字符串或对象。</li> <li>条件的值不需要是常量，也可以是<strong>变量或表达式</strong>。
如下例：</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token string">'hello world'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token string">'hello'</span> <span class="token operator">+</span> <span class="token string">'world'</span><span class="token operator">:</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Greeting was found.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">'goodbye'</span><span class="token operator">:</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'closing was found'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">default</span><span class="token operator">:</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'unexpected message was found'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>上例在<code>switch</code>中使用了字符串，第一个条件使用表达式，求值为两个字符串拼接后的结果。因为结果等于<code>switch</code>的参数，所以输出“Greeting was found.”。能够在判断中使用表达式，就可以在判断中加入<strong>更多逻辑：</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> num <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> num <span class="token operator">&lt;</span> <span class="token number">25</span><span class="token operator">:</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'less than 25'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> num <span class="token operator">&gt;</span> <span class="token number">25</span><span class="token operator">:</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'more than 25'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token operator">:</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'dont know'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>上例传给<code>switch</code>语句的<strong>参数</strong>之所以是<code>true</code>，是因为每个条件（case）的表达式都会<strong>返回布尔值</strong>。</p> <div class="custom-block tip"><p class="custom-block-title">注意</p> <p><code>switch</code>语句在比较每个条件的值时，使用<strong>全等操作符</strong>，因此不会强制转换数据类型。</p></div> <h2 id="_3-7-函数"><a href="#_3-7-函数" class="header-anchor">#</a> 3.7 函数</h2> <p>函数对任何语言来说都是<strong>核心组件</strong>，因为它们可以<strong>封装语句</strong>，然后在任何时间、任何地点来<strong>执行</strong>。ECMAScript中的函数使用<code>function</code>关键字<strong>声明</strong>，后跟一组<strong>参数</strong>，然后是<strong>函数体</strong>。</p> <div class="custom-block tip"><p class="custom-block-title">注意</p> <p>第10章会更详细的介绍函数。</p></div> <ul><li>可以通过函数名来调用函数，参数放在括号里（多个参数使用逗号隔开）。</li> <li>ECMAScript中的函数不需要指定是否返回值。</li> <li><code>return</code>语句
<ul><li>任何函数在任何时间都可以使用<code>return</code>语句来返回函数的值。</li> <li>除了<code>return</code>语句，没有任何特殊声明表明函数有返回值。</li> <li>只要碰到<code>return</code>语句，函数会<strong>立即停止执行并退出</strong>，因此，<code>return</code>语句后面的代码<strong>不会</strong>被执行。</li> <li><code>return</code>语句可以不带返回值，这时函数会立即停止执行并返回<code>undefined</code>。这种用法用于<strong>提前终止函数执行</strong>，而不是为了返回值。</li></ul></li> <li>严格模式对函数有一些限制，如果违法，会导致语法错误（syntax error），代码也不会执行：
<ul><li>函数不能以eval或arguments作为名称。</li> <li>函数参数不能叫eval或arguments。</li> <li>两个命名参数不能拥有同一个名称。</li></ul></li></ul> <div class="custom-block tip"><p class="custom-block-title">注意</p> <p>最佳实践是函数要么有返回值，要么没有。只在某个条件是返回值的函数会带来麻烦，尤其是在调试时。</p></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">3/26/2021, 10:10:36 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/views/professionalJs4th-doc/basic/chapter-2.html" class="prev">
        第2章 HTML中的JavaScript
      </a></span> <span class="next"><a href="/views/professionalJs4th-doc/basic/chapter-4.html">
        第4章 变量、作用域与内存
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.0164061c.js" defer></script><script src="/assets/js/2.75c81597.js" defer></script><script src="/assets/js/26.4611b5d7.js" defer></script>
  </body>
</html>
